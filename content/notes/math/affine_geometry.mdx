---
title: 'Affine Geometry'
subject: 'Mathematics'
showToc: true
---

# Affine space

<MathBox title='Affine space' boxType='definition' tag="definition-1">
An affine space $(E, \overrightharpoon{V}, +)$ consists of a nonempty set of points $E$, a vector space $\overrightharpoon{V}$ over a field $\mathbb{F}$ and a free and transitive action

$$
  +: E\times \overrightharpoon{V} \to E
$$

with the following properties
1. **Right identity:** $\mathbf{p} + \overrightharpoon{\mathbf{0}} = \mathbf{p}$ for any $\mathbf{p}\in E$
2. **Associativity:** $(\mathbf{p} + \overrightharpoon{\mathbf{v}}) + \mathbf{w} = \mathbf{p} + (\mathbf{v} + \mathbf{w})$ for any $\mathbf{p}\in E$, $\mathbf{v}, \mathbf{w}\in V$
3. For every $\mathbf{a}, \mathbf{b}\in A$, there is a unique $\overrightharpoon{\mathbf{v}}\in\overrightharpoon{V}$ such that $\mathbf{a} + \overrightharpoon{\mathbf{v}} = \mathbf{b}$. The unique vector $\overrightharpoon{\mathbf{v}}$ is denoted $\overrightharpoon{\mathbf{ab}}$, or alternatively $\mathbf{b} - \mathbf{a}$.

The set $E$ is called an affine space over the $\mathbb{F}$-vector space $\overrightharpoon{\mathbf{V}}$. Note that the affine space $E$ and vector space $\overrightharpoon{V}$ share the same dimension, i.e. $\dim(E) = \dim(\overrightharpoon{V})$. If $\mathbf{p}\in E$ and $\overrightharpoon{\mathbf{v}}\in\overrightharpoon{V}$, then $\mathbf{p} + \overrightharpoon{\mathbf{v}}\in E$ be thought of as the point $\mathbf{p}$ translated by $\overrightharpoon{\mathbf{v}}$. If $\mathbf{p},\mathbf{q}\in E$, then $\overrightharpoon{\mathbf{pq}}\in\overrightharpoon{V}$ can be thought of as the vector with tail at $\mathbf{p}$ and head at $\mathbf{q}$. Note that there is no distinguished point in an affine space.
</MathBox>

If $E$ is an affine space over $\overrightharpoon{V}$, then $E$ and $\overrightharpoon{V}$ can be intuitively interpreted as the same object, but with different perspectives. Setting a point $\mathbf{a}\in E$ as an origin of $E$, we can recover all the points in $E$ as the translated point $\mathbf{a} + \overrightharpoon{\mathbf{v}}$ for all $\overrightharpoon{\mathbf{v}}\in\overrightharpoon{V}$. This can be formalized by defining two maps between $E$ and $\overrightharpoon{V}$. For every $\mathbf{p}\in E$, consider the mapping from $\overrightharpoon{E}$ to $E$ given by

$$
  \overrightharpoon{\mathbf{v}} \mapsto \mathbf{a} + \overrightharpoon{\mathbf{v}}
$$

and consider the mapping from $E$ to $\overrightharpoon{V}$ given by

$$
  \mathbf{b} \mapsto \overrightharpoon{\mathbf{ab}}
$$

The composition of the first mapping with the second is

$$
  \mathbf{u} \mapsto \mathbf{a} + \overrightharpoon{\mathbf{v}} \mapsto \mathbf{a}(\mathbf{a} + \overrightharpoon{\mathbf{v}}) = \mathbf{v}
$$

The composition of the second mapping with the first is

$$
  \mathbf{b} \mapsto \overrightharpoon{\mathbf{ab}} \mapsto \mathbf{a} + \overrightharpoon{\mathbf{ab}} = \mathbf{b}
$$

This shows that the mappings are both bijections. When we identify $E$ with $\overrightharpoon{V}$ via the mapping $\mathbf{b}\mapsto\overrightharpoon{\mathbf{ab}}$, we consider $E$ as the vector space obtained by taking $\mathbf{a}$ as the origin in $E$, denoted $E_\mathbf{a}$. Thus, an affine space is a way of defining a vector space structure on a set of points $E$, without making a commitment to a fixed origin in $E$. Nevertheless, as soon as we commit to an origin $\mathbf{a}$ in $E$, we can view $E$ as the vector space $E_\mathbf{a}$.

Any vector space $\overrightharpoon{V}$ can be considered as an affine space over itself, i.e. as the affine space $(V, \overrightharpoon{V}, +)$. In this case, $V = \overrightharpoon{V}$ is considered as a set of points, and vector addition defines a free and transitive action $+: V\times\overrightharpoon{V}$. This affine structure is called the *canonical affine structure* on $\overrightharpoon{V}$.

In particular, the Euclidean space $\R^n$ defines the real affine space $\mathbb{A}^n = (\R^n ,\R^n, +)$. In order to distinguish between the double role played by the members of $\R^n$, it is common to denote points by row vectors, and vectors by column vectors. Thus, the action of the vector space $\R^n$ over $\R^n$ as a set of points given by 

$$
  \mathbf{a} + \overrightharpoon{\mathbf{v}} = \begin{bmatrix} a_1 & \cdots a_n \end{bmatrix} + \begin{bmatrix} v_1 \\ \vdots \\ v_n \end{bmatrix} = \begin{bmatrix} a_1 + v_1 & \cdots & a_n + v_n \end{bmatrix}
$$

for $\mathbf{a}, \overrightharpoon{\mathbf{v}}\in \R^n$.

<MathBox title='Properties of affine space action' boxType='proposition' tag='proposition-1'>
Let $E$ be an affine space over a vector space $\overrightharpoon{V}$. Then for any $\mathbf{a},\mathbf{b},\mathbf{c},\mathbf{d}\in E$ and $\overrightharpoon{\mathbf{v}}\in\overrightharpoon{V}$
1. $\overrightharpoon{\mathbf{aa}} = \mathbf{0}$
2. **Chasles' identity:** $\overrightharpoon{\mathbf{ab}} + \overrightharpoon{\mathbf{bc}} = \overrightharpoon{\mathbf{ac}}$
    - Since $\overrightharpoon{\mathbf{ab}} + \overrightharpoon{\mathbf{bc}} = \overrightharpoon{\mathbf{ad}} + \overrightharpoon{\mathbf{dc}} = \overrightharpoon{\mathbf{ac}}$, we get the *parellelogram law*: $\overrightharpoon{\mathbf{ab}} = \overrightharpoon{\mathbf{dc}}$ if and only if $\overrightharpoon{\mathbf{bc}} = \overrightharpoon{\mathbf{ad}}$. 
3. $\overrightharpoon{\mathbf{ba}} = -\overrightharpoon{\mathbf{ab}}$
4. $\overrightharpoon{\mathbf{a}(\mathbf{a} + \overrightharpoon{\mathbf{v}})} = \overrightharpoon{\mathbf{v}}$

<details>
<summary>Proof</summary>

**(1):** This follows immediately from the right identity property.

**(2):** From associativity
$$
\begin{align*}
  \mathbf{a} + (\overrightharpoon{\mathbf{ab} + \overrightharpoon{\mathbf{bc}}}) =& (\mathbf{a} + \overrightharpoon{ab}) + \overrightharpoon{\mathbf{bc}} \\
  =& \mathbf{b} + \overrightharpoon{\mathbf{bc}}= \mathbf{c}
\end{align*}
$$

**(3):** This follows from **(1)** and **(2)** for $\mathbf{r} = \mathbf{p}$.

**(4):** Note that $\overrightharpoon{\mathbf{p}(\mathbf{p} + \overrightharpoon{\mathbf{v}})}$ is the unique vector such that 

$$
  \mathbf{p} + \mathbf{v} = \mathbf{p} + \overrightharpoon{\mathbf{p}(\mathbf{p} + \overrightharpoon{\mathbf{v}})}
$$

Thus, $\mathbf{q} = \mathbf{p} + \overrightharpoon{\mathbf{v}}$ is equivalent to $\overrightharpoon{\mathbf{pq}} = \overrightharpoon{\mathbf{v}}$
</details>
</MathBox>

## Affine combinations (barycenters)

<MathBox title='' boxType='lemma' tag='lemma-1'>
Given a real affine space $E$, let $(\mathbf{a}_i)_{i\in I}$ be a collection of points and $(\lambda_i)_{i\in I}$ a family of scalars for some index set $I\subseteq\N$. For any two points $\mathbf{a},\mathbf{b}\in E$, the following properties hold:
1. If $\sum_{i\in I} \lambda_i = 1$, then
$$
  \mathbf{a} + \sum_{i\in I} \lambda_i \overrightharpoon{\mathbf{aa}_i} = \mathbf{b} + \sum_{i\in I} \lambda_i \overrightharpoon{\mathbf{ba}_i}
$$
2. If $\sum_{i\in I} \lambda_i = 0$, then
$$
  \sum_{i\in I} \lambda_i \overrightharpoon{\mathbf{aa}_i} = \sum_{i\in I} \lambda_i \overrightharpoon{\mathbf{ba}_i}
$$

Note that **(1)** implies that the point

$$
  \mathbf{x} = \mathbf{a} + \sum_{i\in I} \lambda_{i} \overrightharpoon{\mathbf{aa}_i}
$$

is independent of the choice of the origin $\mathbf{a}\in E$

<details>
<summary>Proof</summary>

**(1):** By Chasles' identity (Proposition $\ref{proposition-1}.2$), we have

$$
\begin{align*}
  \mathbf{a} + \sum_{i\in I} \lambda_i \overrightharpoon{\mathbf{aa}_i} =& \mathbf{a} + \sum_{i\in I} \lambda_i (\overrightharpoon{\mathbf{ab}} + \overrightharpoon{ba}_i) \\
  =& \mathbf{a} + \left(\sum_{i\in I} \lambda_i \right)\overrightharpoon{\mathbf{ab}} + \sum_{i\in I} \lambda_i \overrightharpoon{\mathbf{ba}_i} \\
  =& \underbrace{\mathbf{a} + \overrightharpoon{\mathbf{ab}}}_{=\mathbf{b}} + \sum_{i\in I} \lambda_i \overrightharpoon{\mathbf{ab}_i} \\
  =& \mathbf{b} + \sum_{i\in I} \lambda_i \overrightharpoon{\mathbf{ba}_i}
\end{align*}
$$

**(2):**
$$
\begin{align*}
  \sum_{i\in I} \lambda_i \overrightharpoon{\mathbf{aa}_i} =& \sum_{i\in I} \lambda_i (\overrightharpoon{\mathbf{ab}} + \overrightharpoon{\mathbf{ba}_i}) \\
  =& \left(\sum_{i\in I} \lambda_i \right)\mathbf{ab} + \sum_{i\in I} \lambda_i \overrightharpoon{\mathbf{ba}_i} \\
  =& \sum_{i\in I} \lambda_i \overrightharpoon{\mathbf{ba}_i}
\end{align*}
$$
</details>
</MathBox>

<MathBox title='Barycenter (affine combination)' boxType='definition'>
Let $E$ be a real affine space and $I\subseteq\N$ an index set. Suppose $(\mathbf{a}_i)_{i\in I}$ is a collection of points in $E$, and $(\lambda_i)_{i\in I}$ is a collection of scalars such that $\sum_{i\in I} = 1$. For any $\mathbf{a}\in E$, the point

$$
  \mathbf{a} + \sum_{i\in I} \lambda_i \overrightharpoon{\mathbf{aa}_i}
$$

is called the *barycenter* (or *affine combination* or *barycentric combination*) of the points $\mathbf{a}_i$ assigned the weights $\lambda_i$. The barycenter is denoted

$$
  \sum_{i\in I} \lambda_i \mathbf{a}_i
$$

A *weighted point* is a pair $(\mathbf{a}, \lambda)$ of a point $\mathbf{a}\in E$ and a scalar $\lambda\in\mathbb{R}$. We also say that the point $\sum_{i\in I} \lambda_i \mathbf{a}_i$ is the barycenter of the family of weighted points $((\mathbf{a}_i, \lambda_i))_{i\in I}$.

Note that the barycenter $\mathbf{x}$ of the family of weighted points $((\mathbf{a}_i, \lambda_i))_{i\in I}$ is the unique point such that

$$
  \overrightharpoon{\mathbf{ax}} = \sum_{i\in I} \lambda_i \overrightharpoon{\mathbf{aa}_i},\; \mathbf{a}\in E
$$

and setting $\mathbf{a} = \mathbf{x}$, the point $\mathbf{x}$ is the unique point such that

$$
  \sum_{i\in I} \lambda_i \overrightharpoon{\mathbf{xa}_i} = 0
$$
</MathBox>

## Affine subspaces

<MathBox title='Affine subspace' boxType='definition'>
Given an affine space $(A, \overrightharpoon{A}, +)$, a subset $B\subseteq A$ is an *affine subspace* if for every collection of weighted points $((\mathbf{a}_i, \lambda_i))_{i\in I}$ in $B$ such that $\sum_{i\in I} \lambda_i = 1$, the barycenter $\sum_{i\in I} \lambda_i \mathbf{a}_i$ belongs to $B$. An affine subspace is also called a *flat*. 

The linear subspace $\overrightharpoon{B}\subseteq\overrightharpoon{B}$ associated with an affine subspace $B$ is called the *direction* of $B$. Two affine subspaces $B$ and $C$ are *parallel* if their directions $\overrightharpoon{B}$ and $\overrightharpoon{C}$ are identical. Equivalently, since $\overrightharpoon{B} = \overrightharpoon{C}$, we have $B = \mathbf{b} + \overrightharpoon{B}$ for any $\mathbf{b}\in B$ and $C = \mathbf{c} + \overrightharpoon{C}$ for any $\mathbf{c}\in C$. Thus, $C$ is obtained from $B$ by the translation $\overrightharpoon{\mathbf{bc}}$.
</MathBox>

<MathBox title='' boxType='proposition' tag='proposition-2'>
Let $(A, \overrightharpoon{A}, +)$ be an affine space.
1. A nonempty subset $B\subseteq A$ is an affine subspace if and only if for every point $\mathbf{a}\in B$, the set
$$
  \overrightharpoon{B}_\mathbf{a} = \Set{\overrightharpoon{\mathbf{ax}}| \mathbf{x}\in B}
$$
is a subspace of $\overrightharpoon{A}$. Consequently, $B = \mathbf{a} + \overrightharpoon{B}_\mathbf{a}$. Furthermore,
$$
  \overrightharpoon{B} = \Set{\overrightharpoon{xy} | \mathbf{x},\mathbf{y}\in B}
$$
is a subspace of $\overrightharpoon{A}$ and $\overrightharpoon{B}_\mathbf{a} = \overrightharpoon{B}$ for all $\mathbf{a}\in V$. Thus, $B = \mathbf{a} + \overrightharpoon{B}$.
2. For any linear subspace $\overrightharpoon{B}\subseteq\overrightharpoon{A}$ and for any $\mathbf{a}\in A$, the set $B = \mathbf{a} + \overrightharpoon{B}$ is an affine subspace.
</MathBox>

Let $E$ be an affine space over an $\mathbb{F}$-vector space $\overrightharpoon{V}$. An affine subspace of dimension $1$ is called a *line*. By Proposition $\ref{proposition-2}$, a line is specified by a point $\mathbf{a}\in E$ and a vector $\overrightharpoon{\mathbf{v}}\in V$. Formally, a line $L \subseteq E$ is the set

$$
  L = \Set{\mathbf{p} \in E | \mathbf{p} = \mathbf{a} + \lambda \overrightharpoon{\mathbf{v}} \mathbf{p},\; \lambda\in\mathbb{F}}
$$

Three points $\mathbf{a},\mathbf{b},\mathbf{c}\in E$ are *collinear* if the vectors $\overrightharpoon{\mathbf{ab}}$ and $\overrightharpoon{\mathbf{ac}}$ are linearly independent. If two of the points $\mathbf{a},\mathbf{b},\mathbf{c}$ are distinct, say $\mathbf{a}\neq\mathbf{b}$, there is a unique $\lambda\in\mathbb{F}$ such that $\overrightharpoon{\mathbf{ac}} = \lambda\overrightharpoon{\mathbf{ab}}$ with $\frac{\overrightharpoon{\mathbf{ac}}}{\overrightharpoon{\mathbf{ab}}} = \lambda$.

A plane is specified by a point $\mathbf{a}\in E$ and two linearly independent vectors $\overrightharpoon{\mathbf{u}}, \mathbf{\mathbf{v}}\in\overrightharpoon{V}$. Formally, a plane $P \subseteq E$ is the set

$$
  P = \Set{\mathbf{p} \in E | \mathbf{p} = \mathbf{a} + \lambda\overrightharpoon{\mathbf{v}} + \mu\overrightharpoon{\mathbf{u}},\; \lambda,\mu\in \mathbb{F}}
$$

Four points $\mathbf{a},\mathbf{b},\mathbf{c},\mathbf{d}\in E$ are *coplanar* if the vectors $\overrightharpoon{\mathbf{ab}}$, $\overrightharpoon{\mathbf{ac}}$ and $\overrightharpoon{\mathbf{ad}}$ are linearly independent.

<MathBox title='' boxType='proposition' tag='proposition-2'>
Let $(E,\overrightharpoon{V},+)$ be an affine space and $I\subseteq N$ an index set. If $(\mathbf{a}_i)_{i\in I}$ is a collection of points in $E$, the set $B$ of barycenters $\sum_{i\in I} \lambda_i \mathbf{a}_i$ is the smallest affine subspace containing $(\mathbf{a}_i)_{i\in I}$.

<details>
<summary>Proof</summary>

If $(\mathbf{a}_i)_{i\in I}$ is empty, then $B = \emptyset$, because of the condition $\sum_{i\in I} \lambda_i = 1$. If $(\mathbf{a}_i)_{i\in I}$ is nonempty, then the smallest affine subspace containing $(\mathbf{a}_i)_{i\in I}$ must contain the set $B$ of barycenters $\sum_{i\in I} \lambda_i \mathbf{a}_i$, an thus, it is enough to show that $V$ is closed under affine combinations, which is immediately verified.
</details>
</MathBox>

Given a nonempty subset $S\subseteq E$, the smallest affine subspace of $E$ generated by $S$ is often denoted $\langle S\rangle$.

## Affine independence

<MathBox title='' boxType='lemma'>
Let $(E, \overrightharpoon{V}, +)$ be an affine space and $(\mathbf{a}_i)_{i\in I}$ a collection of points in $E$ for some index set $I\subseteq\N$. If the collection $(\overrightharpoon{\mathbf{a}_i \mathbf{a}_j})_{j\in I\setminus\set{i}}$ is linearly independent for some $i\in I$, then $(\overrightharpoon{\mathbf{a}_i \mathbf{a}_j})_{j\in I\setminus\set{i}}$ is linearly independent for every $i\in I$.

<details>
<summary>Proof</summary>

Assume that the collection $(\overrightharpoon{\mathbf{a}_i \mathbf{a}_j})_{j\in I\setminus\set{i}}$ is linearly independent for some specific $i\in I$. Let $k\in I$ with $k\neq i$, and assume that there are some scalars $(\lambda_j)_{j\in I\setminus\set{k}}$ such that

$$
  \sum_{j\in I\setminus\set{k}} \lambda_j \overrightharpoon{\mathbf{a}_k \mathbf{a}_j} = 0
$$

By Chasles' indentity (Proposition $\ref{proposition-2}.2$), $\overrightharpoon{\mathbf{a}_k \mathbf{a}_j} = \overrightharpoon{\mathbf{a}_k \mathbf{a}_i} + \overrightharpoon{\mathbf{a}_i \mathbf{a}_j}$, giving

$$
\begin{align*}
  \sum_{j\in I\setminus{k}} \lambda_j \overrightharpoon{\mathbf{a}_k \mathbf{a}_j} =& \sum_{j\in I\setminus{k}} \lambda_j \overrightharpoon{\mathbf{a}_k \mathbf{a}_i} + \sum_{j\in I\setminus{k}} \lambda_j \overrightharpoon{\mathbf{a}_i \mathbf{a}_j} \\
  =& \sum_{j\in I\setminus{k}} \lambda_j \overrightharpoon{\mathbf{a}_k \mathbf{a}_i} + \sum_{j\in I\setminus{i,k}} \lambda_j \overrightharpoon{\mathbf{a}_i \mathbf{a}_j} \\
  =& \sum_{j\in I\setminus{i,k}} \lambda_j \overrightharpoon{\mathbf{a}_i \mathbf{a}_j} - \left(\sum_{j\in I\setminus{k}} \lambda_j\right) \overrightharpoon{\mathbf{a}_i \mathbf{a}_k} \\
  =& 0
\end{align*}
$$

Since the collection $(\overrightharpoon{\mathbf{a}_i \mathbf{a}_j})_{j\in I\setminus\set{i}}$ is linearly independent, we must have $\lambda_h = 0$ for all $j\in I\setminus\Set{i,k}$ and $\sum_{j\in I\setminus\set{k}} \lambda_j = 0$, which implies that $\lambda_j = 0$ for all $j\in I\setminus\Set{k}$.
</details>
</MathBox>

<MathBox title='Affine independence' boxType='definition'>
Given an affine space $(E,\overrightharpoon{V},+)$, a collection $(\mathbf{a}_i)_{i\in I}$ of points in $E$ is *linearly independent* if the collection $(\overrightharpoon{\mathbf{a}_i \mathbf{a}_j})_{j\in I\setminus\set{i}}$ is linearly independent for some $i\in I$.
</MathBox>

<MathBox title='Affine independence criterion' boxType='proposition' tag='proposition-3'>
Let $(E,\overrightharpoon{V},+)$ be an affine space and $(\mathbf{a}_i)_{i=0}^m$ a collection of $m + 1$ points in $E$. Suppose $\mathbf{x}\in E$, and assume that $\mathbf{x} = \sum_{i=0}^m \lambda_i \mathbf{a}_i$ with $\sum_{i=0}^m \lambda_i = 1$. Then, the ordered tuple $(\lambda_i)_{i=0}^m$ of scalars such that $\mathbf{x} = \sum_{i=0}^m \lambda_i \mathbf{a}_i$ is unique if and only if the collection $(\overrightharpoon{\mathbf{a}_0 \mathbf{a}_i})_{i=1}^m$ is linearly independent.
</MathBox>

<MathBox title='Affine dependence criterion' boxType='proposition'>
Let $(E,\overrightharpoon{V},+)$ be an affine space and $I\subseteq\N$ an index set. A collection of $(\mathbf{a}_i)_{i\in I}$ of points in $E$ is *affinely dependent* if and only if there is an ordered tuple $(\lambda_i)_{i\in I}$ such that $\lambda_j \neq 0$ for some $j\in I$, $\sum_{i\in I} \lambda_i = 0$ and $\sum_{i\in I} \lambda_i \overrightharpoon{\mathbf{xa_i}} = 0$ for every $\mathbf{x}\in E$.

<details>
<summary>Proof</summary>

By Proposition $\ref{proposition-3}$, the collection $(\mathbf{a}_i)_{i\in I}$ is affinely dependent if and only if the collection of vectors $(\overrightharpoon{\mathbf{a}_i \mathbf{a}_j})_{j\in I\setminus\set{i}}$ is linearly dependent for some $i\in I$. For any $i\in I$, the collection $(\overrightharpoon{\mathbf{a}_i \mathbf{a}_j})_{j\in I\setminus\set{i}}$ is linearly dependent if and only if there is a family $(\lambda_j)_{j\in I\setminus\set{i}}$ such that $\lambda_j \neq 0$ for some $j$, and such that

$$
  \sum_{j\in I\setminus\set{i}} \lambda_j \overrightharpoon{\mathbf{a}_i \mathbf{a}_j} = 0
$$

Then, for any $\mathbf{x}\in E$, we have

$$
\begin{align*}
  \sum_{j\in I\setminus\set{i}} \lambda_j \overrightharpoon{\mathbf{a}_i \mathbf{a}_j} =& \sum_{j\in I\setminus\set{i}} \lambda_j (\overrightharpoon{\mathbf{xa}_j} - \overrightharpoon{\mathbf{xa}_i}) \\
  =& \sum_{j\in I\setminus\set{i}} \lambda_j \overrightharpoon{\mathbf{xa}_j} - \left(\sum_{j\in I\setminus\set{i}} \lambda_j \right) \overrightharpoon{\mathbf{xa}_i}
\end{align*}
$$

and letting $\lambda_i = -\left(\sum_{j\in I\setminus\set{i}} \lambda_j \right)$ we get $\sum_{i\in I} \lambda_i \overrightharpoon{\mathbf{xa}_i} = 0$ with $\lambda_{i\in I} \lambda_i = 0$ and $\lambda_j \neq 0$ for some $j\in I$. The converse is obvious by setting $\mathbf{x} = \mathbf{a}_i$ for some $i$ such that $\lambda_i \neq 0$, since $\sum_{i\in I} \lambda_i = 0$ implies that $\lambda_j \neq 0$ for some $j\neq i$.
</details>
</MathBox>

## Affine frames

Affine frames are the affine analogues of bases in vector spaces. Let $(E,\overrightharpoon{V},+)$ be an affine space of dimension $m$. A collection $(\mathbf{a}_i)_{i=0}^m$ of $m+1$ points in $E$ determines the collection of $m$ vectors $(\overrightharpoon{\mathbf{a}_0 \mathbf{a}_i})_{i=1}^m$ in $\overrightharpoon{V}$. Conversely, given a point $\mathbf{a}_0$ in $E$ and a collection of $m$ vectors $(\overrightharpoon{\mathbf{v}}_i)_{i=1}^m$ in $\overrightharpoon{V}$, we obtain the collection of $m+1$ points $(\mathbf{a}_i)_{i=0}^m$ in $E$, where $\mathbf{a}_i = \mathbf{a}_0 + \mathbf{u}_i$ for $1 \leq i \leq m$.

<MathBox title='Affine frame' boxType='definition'>
Let $(E,\overrightharpoon{V},+)$ be an affine space of dimension $m$. An *affine frame* with origin $\mathbf{a}_0 \in E$ is a collection $(\mathbf{a}_i)_{i=0}^m$ of $m+1$ points in $E$ such that the ordered tuple of vectors $(\overrightharpoon{\mathbf{a}_0 \mathbf{a}_i})_{i=1}^m$ is a basis of $\overrightharpoon{E}$. The affine frame with origin $\mathbf{a}_0$ can also be denoted as the pair $\left(\mathbf{a}_0, (\overrightharpoon{\mathbf{a}_0 \mathbf{a}_i})_{i=1}^m \right)$. In terms of this affine frame, every point $\mathbf{x}\in E$ can be written as a linear combination

$$
  \mathbf{x} = \mathbf{a}_0 + \sum_{i=1}^m x_1 \overrightharpoon{\mathbf{a}_0 \mathbf{a}_i}
$$

for a unique ordered tuple $(x_i)_{i=1}^m$ of scalars, called the *coordinates* of $\mathbf{x}$ with respect to the affine frame $\left(\mathbf{a}_0, (\overrightharpoon{\mathbf{a}_0 \mathbf{a}_i})_{i=1}^m \right)$. Furthermore, every $\mathbf{x}\in E$ can be written as a linear combination

$$
  \mathbf{x} = \sum_{i=0}^m \lambda_i \mathbf{a}_i
$$

for some unique ordered tuple $(\lambda_i)_{i=0}^m$ of scalars such that $\sum_{i=0}^m \lambda_i = 1$, called the *barycentric coordinates* of $\mathbf{x}$ with respect to the affine frame $(\mathbf{a}_i)_{i=0}^m$.

The coordinates $(x_i)_{i=1}^m$ and the barycentric coordinates $(\lambda_i)_{i=0}^m$ are related by the equations

$$
\begin{align*}
  \lambda_0 =& 1 -\sum_{i=1}^m x_i \\
  \lambda_i =& x_i,\; 1\leq i\leq m
\end{align*}
$$

<details>
<summary>Details</summary>

Note that for every $\mathbf{x}\in E$, we have $\mathbf{x} = \mathbf{a}_0 + \overrightharpoon{\mathbf{a}_0 \mathbf{x}}$. If $(\overrightharpoon{\mathbf{a}_0 \mathbf{a}_i})_{i=1}^m$ is a basis for $\overrightharpoon{V}$, there is a unique ordered tuple $(x_i)_{i=1}^m$ of scalars such that

$$
  \mathbf{x} = \mathbf{a}_0 + \sum_{i=1}^m x_i \overrightharpoon{\mathbf{a}_0 \mathbf{a}_i}
$$

Since 

$$
\begin{gather*}
  \mathbf{x} = \mathbf{a}_0 + \sum_{i=1}^m x_i \overrightharpoon{\mathbf{a}_0 \mathbf{a}_i} \\
  \iff \mathbf{x} = \left(1 - \sum_{i=1}^m \right)\mathbf{a}_0 + \sum_{i=1}^m x_i \mathbf{a}_i
\end{gather*}
$$

it follows that $\mathbf{x}\in E$ can also be expressed uniquely as

$$
  \mathbf{x} = \sum_{i=0}^m \lambda_i \mathbf{a}_i
$$

with $\sum_{i=0}^m \lambda_i = 1$ and where $\lambda_0 = 1 \sum_{i=1}^m x_i$ and $\lambda_i = x_i$ for $1\leq i\leq m$.
</details>
</MathBox>

<MathBox title='Affine span' boxType='definition'>
Let $(E,\overrightharpoon{V},+)$ be a real affine space of dimension $m$. If $(\mathbf{a}_i)_{i=0}^m$ is a collection of $m+1$ affinely independent points in $E$, the set of convex combinations

$$
  \Set{\sum_{i=0}^m \lambda_i a_i | \sum_{i=0}^m \lambda_i = 1}
$$

is called the $m$*-simplex* spanned by $(\mathbf{a}_i)_{i=0}^m$, forming a convex hull. The set

$$
  \Set{\mathbf{a}_0 + \sum_{i=i}^m x_i \overrightharpoon{\mathbf{a}_0 \mathbf{a}_i} | x_i \in [0,1] }
$$

is called the *parallelotope* spanned by $(\mathbf{a}_i)_{i=0}^m$. When $\dim(E) = 2$, the parallelotope is called a *parallelogram*, and when $\dim(E) = 3$, a *parallelepiped*. 
</MathBox>

<MathBox title='Convex affine subspace' boxType='definition'>
Let $A$ be a real affine space. An affine subspace $B\subseteq A$ is *convex* if for any two points $\mathbf{a}, \mathbf{b}\in B$, then $\mathbf{c} = (1 - \lambda)\mathbf{a} + \lambda\mathbf{b} \in B$ with $0\leq\lambda\leq 1$.
</MathBox>

## Affine maps

<MathBox title='Convex affine subspace' boxType='definition'>
Let $(A,\vec{A},+)$ and $(B,\vec{B},+)$ be affine spaces and $I\subseteq\N$ an index set. A function $f:A\to B$ is an *affine map* if and only if for every collection $((\mathbf{a}_i, \lambda_i))_{i\in I}$ of weighted points in $A$ such that $\sum_{i\in I} \lambda_i = 1$, we have

$$
  f\left(\sum_{i\in I} \lambda_i \mathbf{a}_i \right) = \sum_{i\in I} \lambda_i f(\mathbf{a}_i)
$$

In other words, $f$ preserves barycenters.
</MathBox>

<MathBox title='Relation between affine and linear maps' boxType='proposition'>
Let $(A,\vec{A},+)$ and $(B,\vec{B},+)$ be affine spaces. If $h:\vec{A}\to\vec{B}$ is a linear map, the map f:A\to B$ defined by

$$
  f(\mathbf{a} + \vec{\mathbf{v}}) = \mathbf{b} + h(\vec{\mathbf{v}}),\; \mathbf{a}\in A, \mathbf{b}\in B, \vec{\mathbf{v}}\in\vec{A}
$$

is an affine map.

<details>
<summary>Proof</summary>

Let $I\subseteq\N$ be an index set. For any collection $(\lambda_i)_{i\in I}$ of scalars with $\sum_{i\in I} \lambda_i = 1$ and any collection $(\vec{\mathbf{v}}_i)_{i\in I}$, we have (using Lemma $\ref{lemma-1}$)

$$
\begin{align*}
  \sum_{i\in I} \lambda_i (\mathbf{a} + \vec{\mathbf{v}}_i) =& \mathbf{a} + \sum_{i\in I} \lambda_i \vec{\mathbf{a}(\mathbf{a} + \vec{\mathbf{v}}_i)} \\
  =& \mathbf{a} + \sum_{i\in I} \lambda_i \vec{\mathbf{v}}_i
\end{align*}
$$

and

$$
\begin{align*}
  \sum_{i\in I} \lambda_i (\mathbf{b} + h(\vec{\mathbf{v}}_i)) =& \mathbf{b} + \sum_{i\in I} \lambda_i \vec{\mathbf{b}(\mathbf{b} + \vec{h(\vec{\mathbf{v}}_i)})} \\
  =& \mathbf{b} + \sum_{i\in I} \lambda_i h(\vec{\mathbf{v}}_i)
\end{align*}
$$

Applying this to $f$ and using the linearity of $h$, we get

$$
\begin{align*}
  f\left(\sum_{i\in I} \lambda_i (\mathbf{a} + \vec{\mathbf{v}}_i) \right) =& f\left(\mathbf{a} + \sum_{i\in I} \lambda_i \vec{\mathbf{v}}_i \right) \\
  =& \mathbf{b} + h\left(\sum_{i\in I} \lambda_i \mathbf{v}_i \right) \\
  =& \mathbf{b} + \sum_{i\in I} \lambda_i h(\vec{\mathbf{v}}_i) \\
  =& \sum_{i\in I} \lambda_i (\mathbf{b} + h(\vec{\mathbf{v}}_i)) \\
  =& \sum_{i\in I} \lambda_i (\mathbf{b} + h(\vec{\mathbf{v}}_i)) \\
  =& \sum_{i\in I} \lambda_i f(\mathbf{a} + \vec{v}_i)
\end{align*}
$$
</details>
</MathBox>

<MathBox title='Relation between affine and linear maps' boxType='corollary'>
Let $(A,\vec{A},+)$ and $(B,\vec{B},+)$ be affine spaces. If $f:A\to B$ is an affine map, there is a unique linear map $\vec{f}:\vec{A}\to\vec{B}$ such that

$$
  f(\mathbf{a} + \vec{\mathbf{v}}) = f(\mathbf{a}) + \vec{f}(\vec{\mathbf{v}}),\; \mathbf{a}\in A, \vec{\mathbf{v}}\in\vec{A}
$$

or equivalently

$$
  f(\mathbf{x}) = f(\mathbf{a}) + \vec{f}(\vec{\mathbf{ax}}) = f(\mathbf{a}) + \vec{f(\mathbf{a})f(\mathbf{x})},\; \mathbf{a},\mathbf{x}\in A
$$

called the linear map associated with $f$.

<details>
<summary>Proof</summary>

Consider any point $\mathbf{a}\in A$. We claim that the following map $\vec{f}:\vec{A}\to\vec{B}$ is linear

$$
  \vec{f}(\mathbf{v}) = \vec{f(\mathbf{a})f(\mathbf{a} + \vec{\mathbf{v}})},\; \vec{\mathbf{v}}\in\vec{A}
$$

For any scalar $\lambda\in\mathbb{F}$, we can write

$$
  \mathbf{a} + \lambda\vec{\mathbf{v}} = \lambda(\mathbf{a} + \vec{\mathbf{v}}) + (1 - \lambda)\mathbf{a}
$$

since $\mathbf{a} + \lambda\vec{\mathbf{v}} = \mathbf{a} + \lambda\vec{\mathbf{a}(\mathbf{a} + \vec{\mathbf{v}})} + (1 - \lambda)\vec{\mathbf{aa}}$. Additionally, we have

$$
  \mathbf{a} + \vec{\mathbf{u}} + \vec{\mathbf{v}} = (\mathbf{a} + \vec{\mathbf{u}}) + (\mathbf{a} + \vec{\mathbf{v}}) - \mathbf{a}
$$

since $\mathbf{a} + \vec{\mathbf{u}} + \vec{\mathbf{v}} = \mathbf{a} + \vec{\mathbf{a}(\mathbf{a} + \vec{\mathbf{u}})} + \vec{\mathbf{a}(\mathbf{a} + \vec{\mathbf{v}})} - \vec{\mathbf{aa}}$. Since $f$ preserves barycenters, we get

$$
  f(\mathbf{a} + \lambda\vec{\mathbf{v}}) = \lambda f(\mathbf{a} + \vec{\mathbf{v}}) + (1 - \lambda)f(\mathbf{a})
$$

Note that $\mathbf{x} = \sum_{i\in I} \lambda_i \mathbf{a}_i$ with $\sum_{i\in I} \lambda_i = 1$ is the barycenter of a collection $((\mathbf{a}_i, \lambda_i))_{i\in I}$ of weighted points if and only if

$$
  \vec{\mathbf{bx}} = \sum_{i\in I} \lambda_i \vec{\mathbf{ba}_i},\; \forall \mathbf{b}\in A
$$

Thus, it follows that

$$
\begin{align*}
  \vec{f(\mathbf{a})f(\mathbf{a} + \vec{\mathbf{v}})} = \lambda \vec{f(\mathbf{a})f(\mathbf{a} + \vec{\mathbf{v}})} + (1 - \lambda)\vec{f(\mathbf{a})f(\mathbf{a})} \\
  =& \lambda \vec{f(\mathbf{a}) f(\mathbf{a} + \vec{\mathbf{v}})}
\end{align*}
$$

showing that $\vec{f}(\lambda\vec{\mathbf{v}}) = \lambda\vec{f}(\vec{\mathbf{v}})$. We also have

$$
  f(\mathbf{a} + \vec{\mathbf{u}} + \vec{\mathbf{v}}) = f(\mathbf{a} + \vec{\mathbf{u}}) + f(\mathbf{a} + \vec{\mathbf{v}}) - f(\mathbf{a})
$$

from which it follows that

$$
  \vec{f(\mathbf{a})f(\mathbf{a} + \vec{\mathbf{u}} + \vec{\mathbf{v}})} = \vec{f(\mathbf{a})f(\mathbf{a} + \vec{\mathbf{u}})} + \vec{f(\mathbf{a})f(\mathbf{a} + \vec{\mathbf{v}})}
$$

showing that $\vec{f}(\vec{\mathbf{u}} + \vec{\mathbf{v}}) = \vec{f}(\vec{\mathbf{u}}) + \vec{f}(\vec{\mathbf{v}})$. Hence, $\vec{f}$ is a linear map. For any other point $\mathbf{b}\in A$, since

$$
\begin{align*}
  \mathbf{b} + \vec{\mathbf{v}} =& \mathbf{a} + \vec{\mathbf{ab}} + \vec{\mathbf{v}} \\
  =& \mathbf{a} + \vec{\mathbf{a}(\mathbf{a} + \vec{\mathbf{v}})} - \vec{\mathbf{aa}} + \vec{\mathbf{ab}}
\end{align*}
$$

we have $\mathbf{b} + \vec{\mathbf{v}} = (\mathbf{a} + \vec{\mathbf{b}}) - (\mathbf{a} + \mathbf{b})$, and since $f$ preserves barycenters, we get

$$
  f(\mathbf{b} + \vec{\mathbf{v}}) = f(\mathbf{a} + \vec{\mathbf{v}}) - f(\mathbf{a}) + f(\mathbf{b})
$$

which implies that

$$
\begin{align*}
  \vec{f(\mathbf{b})f(\mathbf{b} + \vec{\mathbf{v}})} =& \vec{f(\mathbf{b})f(\mathbf{a} + \vec{\mathbf{v}})} - \vec{f(\mathbf{b})f(\mathbf{a})} + \vec{f(\mathbf{b})f(\mathbf{b})} \\
  =& \vec{f(\mathbf{a})f(\mathbf{b})} + \vec{f(\mathbf{b})f(\mathbf{a} + \vec{\mathbf{v}})} \\
  =& \vec{f(\mathbf{a})f(\mathbf{a} + \vec{\mathbf{v}})}
\end{align*}
$$

Thus, $\vec{f(\mathbf{b})f(\mathbf{b} + \vec{\mathbf{v}})} = \vec{f(\mathbf{a})f(\mathbf{a} + \vec{\mathbf{v}})}$, which shows that the definition of $\vec{f}$ does not depend on the choice of $\mathbf{a}\in A$. The uniqueness of $\vec{f}$ is obvious since $\vec{f}(\vec{\mathbf{v}}) = \vec{f(\mathbf{a})f(\mathbf{a} + \vec{\mathbf{v}})}$.

</details>
</MathBox>

<MathBox title='Translations' boxType='proposition'>
Let $(A,\vec{A},+)$ and $(B,\vec{B},+)$ be affine spaces. Suppose $f:A\to B$ is an affine map of the form

$$
  f(\mathbf{x}) = f(\mathbf{a}) + \vec{f}(\vec{\mathbf{ax}}) \mathbf{a},\mathbf{x}\in A
$$

where $\vec{f}:\vec{A}\to\vec{B}$ is a linear map. If $\vec{f} = \operatorname{id}$, then $f$ is a translation.

<details>
<summary>Proof</summary>

If $\vec{f} = \operatorname{id}$, then

$$
\begin{align*}
  f(\mathbf{x}) =& f(\mathbf{a}) + \vec{f}(\vec{\mathbf{ax}}) = f(\mathbf{a}) + \vec{\mathbf{ax}} \\
  =& \mathbf{x} + \vec{\mathbf{xa}} + \vec{\mathbf{a}f(\mathbf{a})} + \vec{\mathbf{ax}} \\
  =& \mathbf{x} + \vec{\mathbf{xa}} + \vec{\mathbf{a}f(\mathbf{a})} - \vec{\mathbf{xa}} \\
  =& \mathbf{x} + \vec{\mathbf{a}f(\mathbf{a})}
\end{align*}
$$

and so $\vec{\mathbf{x}f(\mathbf{x})} = \vec{\mathbf{a}f(\mathbf{a})}$, showing that $f$ is the translation induced by the vector $\vec{\mathbf{a}f(\mathbf{a})}$.
</details>
</MathBox>

<MathBox title='Properties of affine maps' boxType='proposition'>
Let $(A,\vec{A},+)$, $(B,\vec{B},+)$ and $(C,\vec{C},+)$ be affine spaces. Suppose $f:A\to B$ is an affine map of the following form

$$
  f(\mathbf{a} + \vec{\mathbf{v}}) = f(\mathbf{a}) + \vec{f}(\vec{\mathbf{v}}),\; \mathbf{a}\in A, \vec{\mathbf{v}}\in\vec{A}
$$

where $\vec{f}:\vec{A}\to\vec{B}$ is a linear map. Then $f$ has the following properties:
1. If $g:B\to C$ is an affine map, then $g\circ f$ is also affine.
2. $f$ is injective if and only if $\vec{f}$ is injective
3. $f$ is surjective if and only if $\vec{f}$ is surjective
4. $f$ is constant if and only if $\vec{f}\equiv\vec{\mathbf{0}}$

<details>
<summary>Proof</summary>

**(1):** For $\mathbf{a}\in A$ and $\vec{\mathbf{v}}\in\vec{A}$, we have

$$
  g(f(\mathbf{a} + \vec{\mathbf{v}})) = g\left(f\mathbf{a} + \vec{f}(\vec{\mathbf{v}})\right) = g(f(\mathbf{a})) + \vec{g}\left(\vec{f}(\vec{\mathbf{v}}) \right)
$$

showing that $\vec{g\circ f} = \vec{g}\circ\vec{f}$.
</details>
</MathBox>

### Matrix representation

If $A$ is an affine space of dimension $m$ and $(\mathbf{a}_i)_{i=0}^m$ is an affine frame for $A$, then for any other affine space $B$ and for any sequence of $(\mathbf{b}_i)_{i=0}^m$ of points in $B$, there is a unique affine maps $f:A\to B$ such that $f(\mathbf{a}_i) = \mathbf{b}_i$ for $0\leq i \leq m$. For any barycentric coordinate $(\lambda_i)_{i=0}^m$ with $\sum_{i=0}^m$, it follows that

$$
  f\left(\sum_{i=0}^m \lambda_i \mathbf{a}_i \right) = \sum_{i=0}^m \lambda_i \mathbf{b}_i
$$

Affine maps can be represented in terms of matrices using affine frames. Since

$$
  f(\mathbf{a}_0 + \vec{\mathbf{x}}) = f(\mathbf{a}_0) + \vec{f}(\vec{\mathbf{x}}),\; \vec{\mathbf{x}}\in\vec{A}
$$

we have

$$
  \vec{\mathbf{a}_0 f(\mathbf{a}_0 + \vec{\mathbf{x}})} = \vec{\mathbf{a}_0 f(\mathbf{a}_0)} + \vec{f}(\vec{\mathbf{x}}) \tag{\label{equation-1}}
$$

Furthermore, we can express the following:

$$
\begin{align*}
  \vec{\mathbf{x}} =& \sum_{i=1}^m \vec{\mathbf{a}_0 \mathbf{a}_i} \\
  \vec{\mathbf{a}_0 f(\mathbf{a}_0)} =& \sum_{i=1}^m b_i \vec{\mathbf{a}_0 \mathbf{a}_i} \\
  \vec{\mathbf{a}_0 f(\mathbf{a}_0) + \vec{\mathbf{x}}} =& \sum_{i=1}^m y_i \vec{\mathbf{a}_0 \mathbf{a}_i}
\end{align*}
$$

If $\mathbf{A} = (a_{ij})$ is the $m\times m$-matrix of the linear map $\vec{f}$ over the basis $(\vec{\mathbf{a}_0 \mathbf{a}_i})_{i=1}^m$, then $\eqref{equation-1}$ is equivalent to $\mathbf{y} = \mathbf{Ax} + \mathbf{b}$. Note that $\mathbf{b} \neq \mathbf{0}$ unless $f(\mathbf{a}_0)$. Thus, $f$ is generally not a linear transformation, unless it has a fixed point, i.e. there is a point $\mathbf{a}_0$ such that $f(\mathbf{a}_0) = \mathbf{a}_0$. The vector $\mathbf{b}$ is the translation component of the affine map.

An affine map of the form $\mathbf{y} = \mathbf{Ax} + \mathbf{b}$ can be converted into a linear equation by adding $1$ as the $(m+1)$-th component of $\mathbf{x}$, $\mathbf{y}$ and $\mathbf{b}$, and form the $(m + 1)\times (m+1)$-matrix $\left[\begin{smallmatrix} \mathbf{A} & \mathbf{b} \\ \mathbf{0} & 1 \end{smallmatrix}\right]$. This gives the linear equation

$$
\begin{bmatrix} \mathbf{y} \\ 1 \end{bmatrix} = \begin{bmatrix} \mathbf{A} & \mathbf{b} \\ \mathbf{0} & 1 \end{bmatrix}\cdot\begin{bmatrix} \mathbf{x} \\ 1 \end{bmatrix} 
$$

### Collinear ratio

Let $f:A\to B$ be a bijective affine maps and consider three collinear points $\mathbf{a},\mathbf{b},\mathbf{c}\in A$ with $\mathbf{a}\neq \mathbf{b}$ and $\mathbf{c} = (1 - \lambda)\mathbf{a} + \lambda\mathbf{b}$. Since $f$ preserves barycenters, we have $f(\mathbf{c}) = (1-\lambda)f(\mathbf{a}) + \lambda f(\mathbf{b})$, which shows that $f(\mathbf{a}), f(\mathbf{b}), f(\mathbf{c})$ are collinear in $B$.

Conversely, suppose $f:A\to B$ is a bijection between two real affine spaces of the same dimension $\dim(A) = \dim(B) \geq 2$. If $f$ maps any three collinear points to collinear points, then $f$ is affine.

<MathBox title='Collinear ratio' boxType='definition'>
Let $A$ be an affine space. If $\mathbf{a}, \mathbf{b}, \mathbf{c}\in A$ are collinear points, where $\mathbf{a}\neq\mathbf{c}$, then $\mathbf{b} = (1-\beta)\mathbf{a} + \beta\mathbf{c}$ for some unique scalar $\beta$. The *ratio* of the sequence $(\mathbf{a},\mathbf{b},\mathbf{c})$ is defined as

$$
  \operatorname{ratio}(\mathbf{a},\mathbf{b},\mathbf{c}) = \frac{\beta}{1 - \beta} = \frac{\vec{\mathbf{ab}}}{\vec{\mathbf{bc}}}
$$

provided that $\beta \neq 1$, i.e. $\mathbf{b}\neq\mathbf{c}$.
</MathBox>