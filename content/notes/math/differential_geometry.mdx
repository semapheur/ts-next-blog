---
title: 'Differential Geometry'
subject: 'Mathematics'
showToc: true
---

In the following discussions, the term "smooth" means infinitely differentiable, or $C^\infty$. If $M$ is a smooth manifold, $\mathcal{F} = C^\infty (M)$ denotes the ring of smooth functions on $M$.

# Central concepts about smooth manifolds

# Curvature and vector fields

## Riemannian manifolds

### Inner product

<MathBox title='Inner product' boxType='definition'>
Let $V$ be an $\mathbb{F}$-vector space. The map $\langle\cdot, \cdot\rangle: V\times V \to\mathbb{F}$ is called an inner product on $V$ if it satisfies for all $\boldsymbol{u},\boldsymbol{v}, \boldsymbol{w}\in V$ and $\alpha, \beta \in\mathbb{F}$

1. **Positive definiteness:** $\langle \boldsymbol{v}, \boldsymbol{v} \rangle \geq 0$ and $\langle \boldsymbol{v}, \boldsymbol{v} \rangle = 0 \iff \boldsymbol{v} = 0$
3. **Conjugate symmetry:** $\langle \boldsymbol{v}, \boldsymbol{w}\rangle = \overline{\langle\boldsymbol{w}, \boldsymbol{v}\rangle}$
    - For $\mathbb{F} = \R$, the inner product is symmetric, i.e. $\langle \boldsymbol{v}, \boldsymbol{w}\rangle = \langle\boldsymbol{w}, \boldsymbol{v}\rangle$
2. **Linearity in the first argument:** $\langle \alpha\boldsymbol{u} + \beta\boldsymbol{v}, \boldsymbol{w} \rangle = \alpha\langle\boldsymbol{u}, \boldsymbol{w}\rangle + \beta\langle\boldsymbol{v}, \boldsymbol{w}\rangle$
    - For $\mathbb{F} = \R$, the symmetry property implies linearity in the second argument as well, making the inner product bilinear.

The pair $(V,\langle\cdot, \cdot\rangle)$ is called an *inner product space*. Note that the inner product can also be defined with linearity the in second argument instead.
</MathBox>

In terms of an inner product allows, we can define the length (norm) of a vector $\mathbf{v}\in V$ by

$$
  \lVert\mathbf{v}\rVert = \sqrt{\langle\mathbf{v},\mathbf{v}\rangle}
$$

and the angle between two non-zero vector $\mathbf{u},\mathbf{v}\in V$ by

$$
  \cos\theta = \frac{\langle\mathbf{u},\mathbf{v}\rangle}{\lVert\mathbf{u}\rVert\cdot\lVert\mathbf{v}\rVert}
$$

<MathBox title='Positive-definite matrices' boxType='definition'>
An $n\times n$ symmetric matrix $\mathbf{A}\in\mathcal{M}_n (\mathbb{F})$ is *positive-definite* if $\mathbf{x}^\top \mathbf{A}\mathbf{x} \geq 0$ for all $\mathbf{x}\in\mathbb{F}^n$. Equality holds if and only $\mathbf{x} = \mathbf{0}$.
</MathBox>

Let $\Set{\mathbf{e}_i}_{i=1}^n$ be a basis for an $n$-dimensional inner product space $V$ and let $\mathbf{A}\in\mathcal{M}_n (\mathbb{F})$ be an $n\times n$ matrix with entries $a_{ij} = \langle\mathbf{e}^i, \mathbf{e}^j\rangle$. The inner product of any two vectors $\mathbf{x} = \sum_{i=1}^n x^i \mathbf{e}^i$ and $\mathbf{y} = \sum_{i=1}^n y^i \mathbf{e}^i$ takes the form

$$
\begin{align*}
  \langle\mathbf{x},\mathbf{y}\rangle =& \left\langle \sum_{i=1}^n x^i \mathbf{e}_i, \sum_{j=1}^n y^j \mathbf{e}_j \right\rangle \\
  =& \sum_{i=1}^n \sum_{j=1}^n a_{ij}x^i y^i = \mathbf{x}^\top \mathbf{Ay}
\end{align*}
$$

To see that this defines an inner product, note that because $\mathbf{A}$ is positive-definite we have $\langle\mathbf{x},\mathbf{x}\rangle = \mathbf{x}^\top \mathbf{A}\mathbf{x} \geq 0$ with equality if and only if $\mathbf{x} = \mathbf{0}$. Because $\mathbf{A}$ is symmetric, we get

$$
\begin{align*}
  \langle \mathbf{y},\mathbf{x}\rangle =& \mathbf{y}^\top \mathbf{Ax} (\mathbf{x}^\top \mathbf{A}^\top \mathbf{y}^\top)^\top \\
  =& (\mathbf{x}^\top \mathbf{Ay})^\top = \mathbf{x}^\top \mathbf{Ay} \\
  =& \langle\mathbf{x},\mathbf{y}\rangle
\end{align*}
$$

Let ${\varepsilon^j}_{j=1}^n$ be the basis of the dual space $V^*$. If 

$$
\begin{align*}
  \langle\mathbf{x},\mathbf{y}\rangle =& \sum_{i,j=1}^n a_{ij}x^i y^j = \sum_{i,j=1}^n a_{ij} \varepsilon^i (\mathbf{x}) \varepsilon^j (\mathbf{y}) \\
  =& \sum_{i,j=1}^n a_{ij} (\varepsilon^i \otimes\varepsilon^j)(\mathbf{x},\mathbf{y}) 
\end{align*}
$$

### Riemannian metric

<MathBox title='Riemannian metric' boxType='definition'>
A Riemannian metric on a smooth manifold $M$ is a smooth symmetric covariant $2$-tensor field $g$ on $M$ that is positive definite at each point. For each $\mathbf{p}\in M$, the 2-form $g_\mathbf{p}$ is an inner product on $T_\mathbf{p} M$, usually denoted

$$
  \langle \mathbf{v}, \mathbf{w} \rangle_g = g_\mathbf{p} (\mathbf{v}, \mathbf{w}),\; \mathbf{v},\mathbf{w}\in T_\mathbf{p} M
$$

In any smooth local coordinates $(x^i)$, a Riemannian metric can be written

$$
  g = g_{ij}\;\mathrm{d}x^i \otimes \mathrm{d}x^j
$$

where $(g_{ij})$ is a symmetric positive definite matrix of smooth functions, i.e. $g_{ij} = g_{ji}$. The symmetry of $g$ allows us to write $g$ in terms of symmetric products

$$
\begin{align*}
  g =& g_{ij}\;\mathrm{d}x^i \otimes \mathrm{d}x^j \\
  =& \frac{1}{2}(g_{ij}\;\mathrm{d}x^i \otimes \mathrm{d}x^j + g_{ji}\;\mathrm{d}x^i \otimes \mathrm{d}x^j) \\
  =& \frac{1}{2}(g_{ij}\;\mathrm{d}x^i \otimes \mathrm{d}x^j + g_{ij}\;\mathrm{d}x^j \otimes \mathrm{d}x^i) \\
  =& g_{ij} \;\mathrm{d}x^i\;\mathrm{d}x^j
\end{align*}
$$
</MathBox>

<MathBox title='Metric-preserving maps' boxType='definition'>
A smooth map $F:(M,g) \to (M, h)$ of Riemannian manifolds is *metric-preserving* if for all $\mathbf{p}\in M$ and tangent vectors $\mathbf{u},\mathbf{v}\in T_\mathbf{p} M$

$$
  \langle \mathbf{u},\mathbf{v}\rangle_\mathbf{p} = \langle F_* \mathbf{u}, F_* \mathbf{v} \rangle_{F_* (\mathbf{p})}
$$

An *isometry* is a metric-preserving diffeomorphism.
</MathBox>

## Curves

<MathBox title='Regular curves' boxType='definition'>
A parametrized curve $c:[a,b]\subseteq\R \to M$ in a smooth manifold $M$ is *regular* if its velocity $c'(t)$ is nonzero for all $t\in[0,1]$. In other words, a regular curve in $M$ is an immersion $[a,b]\to M$.
</MathBox>

The speed of a curve $c:[a,b]\to M$ in a Riemannian manifold $M$ is defined as the magnitude $\lVert c'(t) \rVert$ of its velocity $c'(t)$. The arc length of the curve is

$$
  \ell = \int_a^b \lVert c'(u) \rVert\;\mathrm{d}u
$$

For each $t\in[a,b]$, let $s(t)$ be the arc length of the curve $c$ restricted to $[a,t]$

$$
  s(t) = \int_a^t \lVert c'(u) \rVert\;\mathrm{d}u
$$

The function $s:[a,b]\to[0,\ell]$ is the arc length function of the curve $c$. By the fundamental theorem of calculus, the derivative of $s$ with respect to $t$ is $s'(t) = \lVert c'(t) \rVert$, the speed of $c$.

<MathBox title='Regular curves have diffeomorphic arc length functions' boxType='proposition'>
Let $M$ be a Riemannian manifold. The arc length function $s:[a,b]\to[0,\ell]$ of a regular curve $c:[a,b]\to M$ has a smooth inverse.

<details>
<summary>Proof</summary>

Because $c(t)$ is regular, $s'(t) = \lVert c'(t) \rVert$ is never zero, i.e. $s'(t) > 0$ for all $t\in[a,b]$. This implies that $s(t)$ is a monotonically increasing function, and so has an inverse $t(s)$. By the inverse function theorem, $t$ is a smooth function of $s$.
</details>
</MathBox>

Given a regular curve $c:[a,b]\to M$, we can write $t\in[a,b]$ as a smooth function of the arc length $s$ to get the arc length parametrization $\gamma(s) = c(t(s))$.

<MathBox title='' boxType='proposition'>
A curve is parametrized by arc length if and only if it has unit speed and its parameter starts at $0$.

<details>
<summary>Proof</summary>

The speed of a curve $c:[a,b]\to M$ in a Riemannian manifold $M$ can be computed as the rate of change of the arc length $s$ with respect to $t\in[a,b]$

$$
  \frac{\mathrm{d}s}{\mathrm{d}t} = \lVert c'(t) \rVert
$$

Let $\gamma(s)$ be the arc length reparametrization of $c$. Since $s(a) = 0$, the parameter $s$ starts at $0$. By the chain rule, the velocity of $\gamma$ is

$$
  \gamma'(s) = c'(t(s))t'(s)
$$

Thus, the speed of $\gamma$ is

$$
  \lVert\gamma'(s) \rVert = \lVert c'(t(s)) \rVert \cdot |t'(s)| = \frac{\mathrm{d}s}{\mathrm{d}t}\left|\frac{\mathrm{d}t}{\mathrm{d}s}\right| = \left|\frac{\mathrm{d}s}{\mathrm{d}t} \frac{\mathrm{d}t}{\mathrm{d}s}\right| = 1
$$

Conversely, if a curve $c(t)$ has unit speed, then its arc length is

$$
  s(t) = \int_a^t \lVert c'(u) \rVert\;\mathrm{d}u = \int_a^t 1\;\mathrm{d}u = t - a
$$

If $a = 0$, then $s = t$. So a unit-speed curve starting at $t = 0$ is parametrized by arc length.
</details>
</MathBox>

<MathBox title='Arc length parametrization of a circle' boxType='example'>
The curve $c:[0,2\pi]\to\R^2$ given by $c(t) = (a\cos t, a\sin t)$ for $a > 0$ is regular. Its image is the circle of radius $a$ centered at the origin. Its arc length function is

$$
\begin{align*}
  s =& \int_0^t \lVert c'(u) \rVert\;\mathrm{d}u = \int_0^t \left\lVert\begin{bmatrix} -a\sin t \\ a\cos t \end{bmatrix}\right\rVert\;\mathrm{d}u \\
  =& \int_0^t a\;\mathrm{d}u = at
\end{align*}
$$

Hence, $t = \frac{s}{a}$ and the arc length parametrization is

$$
  \gamma(s) = \left(a \cos\frac{s}{a}, a\sin\frac{s}{a} \right)
$$
</MathBox>

### Signed curvature of a plane curve

Consider a plane curve $\gamma:[0,\ell]\to\R^2$ parametrized by the arc length $s$. Then the velocity vector $T(s) = \gamma'(s)$ has unit length and is tangent to the curve at the point $\mathbf{p} = \gamma(s)$. A reasonable measure of curvature at $\mathbf{p}$ is the magnitude of the derivative

$$
  T'(s) = \frac{\mathrm{d}T}{\mathrm{d}s}(s) = \gamma''(s)
$$

since the faster $T$ changes, the more the curve bends. However, in order to distinguish the directions in which the curve can bend, we will define a curvature with a sign.

There are two unit vectors in the plane perpendicular to $T(s)$ at $\mathbf{p}$. We can choose either one to be $\mathbf{n}(s)$, but usually $\mathbf{n}(s)$ is chosen so that the pair $(T(s),\mathbf{n}(s))$ is oriented positively in the plane, i.e. counterclockwise.

Since $T$ has unit length, we have $\langle T, T \langle = 1$. Applying the product rule, we get

$$
  \langle T', T \rangle + \langle T, T' \rangle = 2 \langle T', T \rangle = 0
$$

Thus, $T'$ is orthogonal to $T$ and so it must be a multiple of $\mathbf{n}$. The scalar $\kappa\in\R$ such that

$$
  T' = \kappa\mathbf{n}
$$

is called the *(signed) curvature* of the plane curve at $\mathbf{p} = \gamma(s)$. We can also write

$$
  \kappa = \langle T', \mathbf{n}\rangle = \langle \gamma'', \mathbf{n} \rangle
$$

The sign of the curvature depends on the choice of $\mathbf{n}$; it indicates whether the curve is bending towards or away from $\mathbf{n}$.

<MathBox title='Curvature of a circle' boxType='example'>
The circle of radius $a$ centered at the origin has arc length parametrization

$$
  \gamma(s) = \left(a \cos\frac{s}{a}, a\sin\frac{s}{a} \right),\; 0 \leq s \leq 2\pi a
$$

The unit tangent vector to the curve is

$$
  T(s) = \gamma'(s) = \begin{bmatrix} -\sin\frac{s}{a} \\ \cos\frac{s}{a} \end{bmatrix}
$$

Its derivative is 

$$
  T'(s) = \gamma''(s) = \begin{bmatrix} -\frac{1}{a}\cos\frac{s}{a} \\ -\frac{1}{a}\sin\frac{s}{a} \end{bmatrix}
$$

We choose the unit normal $\mathbf{n}$ so that the pair $(T,\mathbf{n})$ is oriented counterclockwise. This means $\mathbf{n}$ is obtained from $T$ by multiplying the rotation matrix

$$
  \operatorname{rot}\left(\frac{\pi}{2}\right) = \begin{bmatrix} 
    \cos\frac{\pi}{2} & -\sin\frac{\pi}{2} \\
    \sin\frac{\pi}{2} & \cos\frac{\pi}{2}
  \end{bmatrix} = \begin{bmatrix} 0 & -1 \\ 1 & 0 \end{bmatrix}
$$

Hence

$$
  \mathbf{n} = \begin{bmatrix} 0 & -1 \\ 1 & 0 \end{bmatrix} T = \begin{bmatrix} -\cos\frac{s}{a} \\ -\sin\frac{s}{a} \end{bmatrix}
$$

So $T' = \frac{1}{a}\mathbf{n}$, which shows that the signed curvature $\kappa(s)$ of a circe of radius $a$ is $\frac{1}{a}$, independent of $s$. This accords with the intuition that the larger the radius of a circle, the smaller the curvature.
</MathBox>

### Orientation and curvature

A curve whose endpoints are fixed has two possible arc length parametrizations, depending on how the curve is oriented. If the arc length of the curve if $\ell$, the two parametrizations $\gamma(s)$ and $\tilde{\gamma}(s)$ are related by

$$
  \tilde{\gamma}(s) = \gamma(\ell - s)
$$

Differentiating with respect to the arc length $s$ gives

$$
  \tilde{T}(s) := \tilde{\gamma}(s) = -\gamma'(\ell - s) = -T(\ell - s)
$$

and $\tilde{\gamma}''(s) = \gamma''(\ell - s)$. Rotating the tangent vector $\tilde{T}(s)$ by $90\degree$ amounts to multiplying $\tilde{T}(s)$ in the left by the rotation matrix $\operatorname{rot}\left(\frac{\pi}{2}\right)$. Thus

$$
  \tilde{\mathbf{n}}(s) = \operatorname{rot}\left( \frac{\pi}{2} \right)\tilde{T}(s) = -\operatorname{rot}\left(\frac{\pi}{2}\right)T(\ell - s) = -\mathbf{n}(\ell - s)
$$

It follows that the signed curvature of $\tilde{\gamma}(s) = \gamma(\ell - s)$ is

$$
  \tilde{\kappa}(s) = \langle\tilde{\gamma}''(s),\tilde{\mathbf{n}}(s)\rangle = \langle\gamma''(\ell - s),-\mathbf{n}(\ell - s)\rangle = -\kappa(\ell - s)
$$

## Directional derivatives in Euclidean space

Suppose $X_\mathbf{p} = \sum_{i=1}^n a^i \left.\frac{\partial}{\partial x^i}\right|_\mathbf{p}$ is a tangent vector at point $\mathbf{p}\in\R^n$ and $f:\R^n \to\R$ is a smooth function defined in a neighbourhood of $\mathbf{p}$. The *directional derivative* of $f$ at $\mathbf{p}$ along $X_\mathbf{p}$, denoted $\mathrm{D}_{X_\mathbf{p}} f$ is

$$
\begin{align*}
  \mathrm{D}_{X_\mathbf{p}} f =& \lim_{t\to 0} \frac{f(\mathbf{p} + t\mathbf{a}) - f(\mathbf{p})}{t} = \left.\frac{\mathrm{d}}{\mathrm{d}t}\right|_{t=0} f(\mathbf{p} + t\mathbf{a}) \\
  =& \sum_{i=1}^n \left.\frac{\partial f}{\partial x^i}\right|_{\mathbf{p}} \cdot \left.\frac{\mathrm{d}x^i}{\mathrm{d} t}\right|_{t=0} = \sum_{i=1}^n \left.\frac{\partial f}{\partial x^i}\right|_{\mathbf{p}} \cdot a^i \\
  =& \left( \sum_{i=1}^n a^i \left.\frac{\partial}{\partial x^i}\right|_{\mathbf{p}} \right)f = X_\mathbf{p} f
\end{align*}
$$

We can in fact use any curve $c(t)$ with initial point $c(0) = \mathbf{p}$ and initial vector $c'(0) = X_\mathbf{p}$ to compute the directional derivative of $f$ at $\mathbf{p}$

$$
\begin{align*}
  \mathrm{D}_{X_\mathbf{p}} f =& X_\mathbf{p} f \\
  =& c'(0) f = c_* \left(\left.\frac{\mathrm{d}}{\mathrm{d}t}\right|_{t=0}\right) f = \left.\frac{\mathrm{d}}{\mathrm{d}t}\right|_{t=0} f(c(t))
\end{align*}
$$

The directional derivative at $\mathbf{p}$ of a smooth vector field $Y = \sum_{i=1}^n b^i \frac{\partial}{\partial x^i}$ in $\R^n$ along $X_\mathbf{p}$ is

$$
  \mathrm{D}_{X_\mathbf{p}} Y = \sum_{i=1}^n (X_\mathbf{p} b^i) \left.\frac{\partial}{\partial x^i}\right|_\mathbf{p}
$$

This shows that $\mathrm{D}_{X_\mathbf{p}} Y$ is $\R$-linear in $X_\mathbf{p}$.

When $X$ is a smooth vector field on $\R^n$, we define the vector field $\mathrm{D}_X Y$ on $\R^n$ by

$$
  (\mathrm{D}_X Y)_\mathbf{p} = \mathrm{D}_{X_\mathbf{p}} Y,\; \forall \mathbf{p}\in\R^n
$$

If $X$ and $Y$ are smooth vector fields on $\R^n$, then so is $\mathrm{D}_X Y$. Let $\mathfrak{\R^n}$ be the vector space of all smooth vector fields on $\R^n$. The directional derivative in $\R^n$ gives a bilinear map

$$
  \mathrm{D}: \mathfrak{X}(\R^n)\times\mathfrak{X}(\R^n)\to\mathfrak{X}(\R^n)
$$

which we write as $\mathrm{D}_X Y$ instead of $\mathrm{D}(X,Y)$. Let $\mathcal{F} = C^\infty(\R^n)$ be the ring of smooth functions on $\R^n$. Then $\mathfrak{X}(\R^n)$ is both a vector space over $\R$ and a module over $\mathcal{F}$.

<MathBox title='Properties of the directional derivative of smooth vector fields' boxType='proposition'>
Let $\mathcal{F} = C^\infty(\R^n)$ be the ring of smooth functions on $\R^n$. For smooth vector fields $X, Y\in\mathfrak{X}(\R^n)$, the directional derivative $\mathrm{D}_X Y$ satisfies the following properties
1. $\mathrm{D}_X Y$ is $\mathcal{F}$-linear in $X$ and $\R$-linear in $Y$
2. **Leibniz rule:** if $f$ is a smooth function on $\R^n$, then
$$
  \mathrm{D}_X (fY) = (Xf)Y + f\mathrm{D}_X Y
$$

<details>
<summary>Proof</summary>

**(1):** Let $f$ be a smooth function on $\R^n$ and $\mathbf{p}$ an arbitrary point on $\R^n$. Then

$$
\begin{align*}
  (\mathrm{D}_{fX} Y)_\mathbf{p} =& D_{f(\mathbf{p})X_\mathbf{p}} Y \\
  =& f(\mathbf{p})\mathrm{D}_{X_\mathbf{p}} Y \\
  =& (f\mathrm{D}_X Y)_\mathbf{p}
\end{align*}
$$

For $Z \in\mathfrak{X}(\R^n)$, we have

$$
  (\mathrm{D}_{X + Z} Y)_\mathbf{p} = \mathrm{D}_{X_\mathbf{p} + Z_\mathbf{p}} Y = \mathrm{D}_{X_\mathbf{p}} Y + \mathrm{D}_{Z_\mathbf{p}} Y = (\mathrm{D}_X + \mathrm{D}_Z)_\mathbf{p} 
$$

This proves that $\mathrm{D}_X Y$ is $\mathcal{F}$-linear in $X$. The $\R$-linearity is clear from the directional derivative formula of $Y = \sum_{i=1}^n b^i \frac{\partial}{\partial x^i}$ along $X_\mathbf{p}$

$$
  \mathrm{D}_{X_\mathbf{p}} Y = \sum_{i=1}^n (X_\mathbf{p} b^i) \left.\frac{\partial}{\partial x^i}\left|_\mathbf{p}
$$

**(2):** Suppose $Y = \sum_{i=1}^n b^i \frac{\partial}{\partial x^i}$ where $b^i \in C^infty (\R^n)$. Then

$$
\begin{align*}
  (\mathrm{D}_X (fY))_\mathbf{p} =& \sum_{i=1}^n X_\mathbf{p} (fb^i) \left.\frac{\partial}{\partial x^i}\right|_{\mathbf{p}} \\
  =& \sum_{i=1}^n (X_\mathbf{p} f) b^i (\mathbf{p}) \left.\frac{\partial}{\partial x^i}\right|_{\mathbf{p}} + \sum_{i=1}^n f(\mathbf{p}) X_\mathbf{p} b^i \left.\frac{\partial}{\partial x^i}\right|_{\mathbf{p}} \\
  =& (X_\mathbf{p} f) Y_\mathbf{p} + f(\mathbf{p})D_{X_\mathbf{p}} Y \\
  =& ((Xf)Y + f\mathrm{D}_X Y)_\mathbf{p}
\end{align*}
$$
</details>
</MathBox>

<MathBox title='' boxType='proposition'>
If $X,Y\in\mathfrak{X}(\R^n)$ are smooth vector fields over $\R^n$ then

$$
  \mathrm{D}_X Y - D_Y X = [X, Y] = \mathcal{L}_X Y
$$

where $[X, Y]$ is the Lie bracket and $\mathcal{L}_X Y$ is the Lie derivative of $Y$ with respec to $X$.
</MathBox>

<MathBox title='Torsion of directional derivatives' boxType='proposition'>
Let $X,Y\in\mathfrak{X}(\R^n)$ be smooth vector fields over $\R^n$. The *torsion* of the directional derivative $\mathrm{D}$ is defined as 

$$
  T(X,Y) := \mathrm{D}_X Y - \mathrm{D}_Y X - [X,Y]
$$
</MathBox>

For each smooth vector field $X\in\mathfrak{X}(\R^n)$, the directional derivative $\mathrm{D}_X: \mathfrak{X}(\R^n)\to\mathfrak{X}(\R^n)$ is an $\R$-linear endomorphism. This gives rise to a map $\mathfrak{X}(\R^n) \to\operatorname{end}_\R (\mathfrak{X}(\R^n))$ by $X\mapsto\mathrm{D}_X$. The vector space $\mathfrak{X}(\R^n)$ of smooth vector fields on $\R^n$ is a Lie algebra under the Lie bracket of vector fields. For any vector space $V$, the endomorphism ring $\operatorname{end}_\R (V)$ of endormorphisms of $V$ is also a Lie algebra, with Lie bracket

$$
  [A, B] = A \circ B - B \circ A,\; A,B \in\operatorname{end}(V)
$$

This shows that the map $X\mapsto \mathrm{D}_X$ is an $\R$-linear map of Lie algebras. A measure fo the deviation of the linear map $X\mapsto \mathrm{D}_X$ from being a Lie homomorphism is given by the function

$$
  R(X,Y) = [\mathrm{D}_X, \mathrm{D}_Y] - \mathrm{D}_{[X,Y]} = \mathrm{D}_X \mathrm{D}_Y - \mathrm{D}_Y \mathrm{D}_X - \mathrm{D}_{[X,Y]} \in\operatorname{end}_\R (\mathfrak{X}(M))
$$

called the *curvature* of $\mathrm{D}$.

<MathBox title='' boxType='proposition'>
Let $\mathrm{D}$ be the directional derivative in $\R^n$ and $X,Y,Z\in\mathfrak{X}(\R^n)$ smooth vector fields on $\R^n$. Then
1. **Zero torsion:** $T(X, Y) = \mathrm{D}_X Y - D_Y X - [X,Y] = 0$
2. **Zero curvature:** $R(X, Y) = \mathrm{D}_X \mathrm{D}_Y Z - \mathrm{D}_Y \mathrm{D}_X Z - \mathrm{D}_{[X,Y]}Z = 0$
3. **Compatibility with the metric:** $X\langle Y,Z \rangle = \langle \mathrm{D}_X Y, Z\rangle + \langle Y, \mathrm{D}_X Z \rangle$

<details>
<summary>Proof</summary>

**(2):** Let $Z = \sum_{i=1}^n c^i \frac{\partial}{\partial x^i} \in\mathfrak{X}(\R^n)$, then
$$
  \mathrm{D}_X \mathrm{D}_Y Z = \mathrm{D}_X \left(\sum_{i=1}^n Y (c^i) \frac{\partial}{\partial x^i} \right) = \sum_{i=1} (XYc^i)\frac{\partial}{\partial x^i}
$$

By symmetry,

$$
  \mathrm{D}_Y \mathrm{D}_X Z = \sum_{i=1}^n (YXc^i)\frac{\partial}{\partial x^i}
$$

So

$$
\begin{align*}
  \mathrm{D}_X \mathrm{D}_Y Z - \mathrm{D}_Y \mathrm{D}_X Z = \sum_{i=1}^n (XY - YX)c^i \frac{\partial}{\partial x^i} \\
  =& D_{[X, Y]} Z
\end{align*}
$$

**(3):** Let $Y = \sum_{i=1}^n b^i \frac{\partial}{\partial x^i} \in\mathfrak{X}(\R^n)$ and $Z = \sum_{i=1}^n c^i \frac{\partial}{\partial x^i}\in\mathfrak{X}(\R^n)$, then

$$
\begin{align*}
  X\langle X, Z \rangle =& X\left(\sum_{i=1}^n b^i c^i \right) = \sum_{i=1}^n (Xb^i)c^i + \sum_{i=1}^n b^i(Xc^i) \\
  =& \langle \mathrm{D}_X Y, Z \rangle + \langle Y, \mathrm{D}_X Z \rangle
\end{align*}
$$
</details>
</MathBox>

### Vector fields along a curve

<MathBox title='Vector field along a curve' boxType='definition'>
Suppose that $c:[a,b]\to M$ is a parametrized curve in a manifold $M$. A vector field along $c$ is the assignment a tangent vector $V(t) \in T_{c(t)}M$ to each $t\in[a,b]$. Such a vector field is smooth if for every smooth function $f$ on $M$, the function $V(t)f$ is smooth as a function of $t$.
</MathBox>

<MathBox title='Velocity vector field' boxType='example'>
The velocity vector field $c'(t)$ of a parametrized curve $c$ is defined by

$$
  c'(t) = c_{*,t}\left(\left.\frac{\mathrm{d}}{\mathrm{d}t}\right|_t \right) \in T_{c(t)}M
$$

It is a vector field along $c$.
</MathBox>

<MathBox title='Velocity vector field' boxType='example'>
If $\tilde{V}$ is a vector field on $M$ and $c:[a,b]\to M$ is a parametrized curve in $M$, then $\tilde{V}$ induces a vector field $V$ along $c$ by

$$
  V(t) = \tilde{V}_{c(t)}
$$

Now suppose $c:[a,b]\to\R^n$ is a curve in $\R^n$ and $V$ is a smooth vector field along $c$. Then $V(t)$ can be written as a linear combination of the standard basis vectors

$$
  V(t) = \sum_{i=1}^n v^i (t) \left.\frac{\partial}{\partial x^i}\right|_{c(t)}
$$

Differentiating with respect to $t$ gives

$$
  \frac{\mathrm{d}V}{\mathrm{d}t}(t) = \sum_{i=1}^n \frac{\mathrm{d}v^i}{\mathrm{d}t}(t) \left.\frac{\partial}{\partial x^i}\right|_{c(t)}
$$

which is also a smooth vector field along $c$.
</MathBox>

<MathBox title='Vector field along a curve' boxType='proposition'>
Let $c:[a,b]\to\R^n$ be a curve in $\R^n$ and let $V(t)$ and $W(t)$ be smooth vector fields along $c$. Then

$$
  \frac{\mathrm{d}}{\mathrm{d}t}\langle V(t),W(t) \rangle = \left\langle\frac{\mathrm{d}V}{\mathrm{d}t},W \right\rangle + \left\langle V, \frac{\mathrm{d}W}{\mathrm{d}t} \right\rangle
$$
</MathBox>

### Vector fields along a submanifold

<MathBox title='Vector field along a submanifold' boxType='proposition'>
Let $M$ be a submanifold of a manifold $\tilde{M}$. A vector field $X$ *on* $M$ assigns to each $\mathbf{p}\in M$ a tangent vector $X_\mathbf{p} \in T_\mathbf{p} M$. A vector field $X$ *along* $M$ in $\tilde{M}$ assigns to each $\mathbf{p}\in M$ a tangent vector $X_\mathbf{p} \in T_\mathbf{p} M$. A vector field $X$ along $M$ is smooth if for every smooth function $f$ on $\tilde{M}$, the function $Xf$ is smooth on $M$.

The set of all small smooth vector fields on a submanifold $M$ in a manifold $\tilde{M}$ is denoted $\Gamma(T\tilde{M}|_M)$. It is a module over the ring $\mathcal{F} = C^\infty (M)$ of smooth functions on $M$.
</MathBox>

### Directional derivatives on a submanifold of $\R^n$

Suppose $M$ is a regular submanifold of $\R^n$. At any point $\mathbf{p}\in M$, if $X_\mathbf{p}\in T_\mathbf{p} M$ is a tangent vector at $\mathbf{p}$ and $Y = \sum_{i=1}^n b^i \frac{\partial}{\partial x^i}$ is a vector field along $M$ in $\R^n$, then the directional derivative $\mathrm{D}_{X_\mathbf{p}} Y$ is defined as

$$
  \mathrm{D}_{X_\mathbf{p}} Y = \sum_{i=1}^n (X_\mathbf{p} b^i) \left.\frac{\partial}{\partial x^i}\right|_\mathbf{p}
$$

As $\mathbf{p}$ varies over $M$, this allows us to associate to a smooth vector field $X$ on $M$ and a smooth vector field $Y$ along $M$, a smooth vector field $D_X Y$ along $M$ by

$$
  \mathrm{D}_X Y = \sum_{i=1}^n (X b^i) \frac{\partial}{\partial x^i} \in \Gamma(T\R^n |_M)
$$

For any $\mathbf{p}\in M$, we have $(\mathrm{D}_X Y)_\mathbf{p} = D_{X_\mathbf{p}} Y$ by definition. It follows that there is an $\R$-bilinear map $\mathrm{D}:\mathfrak{X}(M)\times\Gamma(T\R^n |_M) \to\Gamma(T\R^n |_M)$ by $\mathrm{D}(X,Y) = \mathrm{D}_X Y$ called the directional derivative on $M$. Because of the asymmetry between $X$ and $Y$, where $X$ is a vector field on $M$ while $Y$ is a vector field along $M$, the torsion $T(X,Y) := \mathrm{D}_X Y - \mathrm{D}_Y X - [X,Y]$ no longer makes sense. Otherwise, $\mathrm{D}$ satisfies the same properties as the directional derivative $\mathrm{D}$ on $\R^n$. 

<MathBox title='' boxType='proposition'>
Let $\mathcal{F} = C^\infty (M)$ be the ring of smooth functions on $M$. Suppose $M$ is a regular submanifold of $\R^n$ and $\mathrm{D}$ is the directional derivative
1. $\mathrm{D}(X,Y) = \mathrm{D}_X Y$ is $\mathcal{F}$-linear in $X$ and $\R$-linear in $Y$
2. **Leibniz rule:** if $f\in C^\infty (M)$, then
$$
  \mathrm{D}(X,fY) = \mathrm{D}_X (fY) = (Xf)Y + f\mathrm{D}_X Y
$$
</MathBox>

<MathBox title='' boxType='proposition'>
Suppose $M$ is a regular submanifold of $\R^n$ and $\mathrm{D}$ is the directional derivative on $M$
1. **Zero curvature:** If $X, Y\in\mathfrak{X}(M)$ and $Z\in\Gamma(T\R^n |_M)$, then
$$
  \mathrm{D}_X \mathrm{D}_Y Z - \mathrm{D}_Y \mathrm{D}_X Z - \mathrm{D}_{[X,Y]} Z = 0
$$
2. **Compatibility with the metric:** If $X\in\mathfrak{X}(M)$ and $Y,Z\in\Gamma(T\R^n |_M)$, then
$$
  X\langle Y, Z\rangle = \langle \mathrm{D}_X Y, Z \rangle + \langle Y, \mathrm{D}_X Z \rangle
$$
</MathBox>

<MathBox title='' boxType='proposition'>
Suppose $\tilde{V}$ is a smooth vector field along a regular submanifold $M$ in $\R^n$ and $c:[a,b]\to M$ is a smooth curve in $M$. Then $\tilde{V}$ induces a vector field $V$ along $c$:

$$
  V(t) = \tilde{V}_{c(t)} \in T_{c(t)}\R^n
$$

Differentiation with respect to $t$ of a vector field along a curve is the directional derivative in the tangent direction

$$
  \frac{\mathrm{d}V}{\mathrm{d}t} = \mathrm{D}_{c'(t)}\tilde{V}
$$

<details>
<summary>Proof</summary>

Let $V(t) = \sum_{i=1}^n v^i (t) \left.\frac{\partial}{\partial x^i}\left|_{c(t)}$ and $\tilde{V}_\mathbf{p} = \sum_{i=1}^n \tilde{v}^i (\mathbf{p}) \left.\frac{\partial}{\partial x^i}\right|_\mathbf{p}$ for $\mathbf{p}\in M$. Since $V(t) = \tilde{V}_{c(t)}$, it follows that $v^i = \tilde{v}^i \circ c$. By the definition of $c'(t)$

$$
  c'(t)\tilde{v}^i = c_* \left(\frac{\mathrm{d}}{\mathrm{d}t}\right)\tilde{v}^i = \frac{\mathrm{d}}{\mathrm{d}t}(\tilde{v}^i \circ c) = \frac{\mathrm{d}}{\mathrm{d}t}v^i
$$

Thus,

$$
\begin{align*}
  D_{c'(t)} \tilde{V} =& \sum_{i=1}^n (c'(t)\tilde{v}^i) \left.\frac{\partial}{\partial x^i}|_{c(t)} \\
  =& \sum_{i=1}^n \frac{\mathrm{d}v^i}{\mathrm{d}t} \left.\frac{\partial}{\partial x^i}\right|_{c(t)} = \frac{\mathrm{d}V}{\mathrm{d}t}
\end{align*}
$$
</details>
</MathBox>

## Curvature of surfaces in $\R^3$

### Principal, mean and Guassian curvature

Recall that a *regular submanifold* of a manifold $\tilde{M}$ is a subset of the manifold $\tilde{M}$ locally defined by the vanishing of coordinate functions. A surface in $\R^3$ is a 2-dimensional regular submanifold of $\R^3$. Let $\mathbf{p}$ be a point on a surface $M$ in $\R^3$. A *normal vector* to $M$ at $\mathbf{p}$ is a vector $N_\mathbf{p}\in T_\mathbf{p}\R^3$ that is orthogonal to the tangent plane $T_\mathbf{p} M$. A *normal vector field* on $M$ is a function $N$ that assigns to each $\mathbf{p}\in M$ a normal vector $N_\mathbf{p}$ at $\mathbf{p}$. If $N$ is a normal vector field on $M$, then at each point $\mathbf{p}\in M$, we can write

$$
  N_\mathbf{p} = \sum_{i=1}^3 a^i (\mathbf{p}) \left.\frac{\partial}{\partial x^i}\right|_{\mathbf{p}}
$$

The normal vector field $N$ on $M$ is smooth if the coefficient functions $a^i$ are smooth functions on $M$.

Consider the unit normal vector $N_\mathbf{p}$ at $\mathbf{p}$. Under the canonical identification of $T_\mathbf{p} \R^3$ with $\R^3$, every plane $P$ through $N_\mathbf{p}$ slice the surface $M$ along a plane curve $P\cap M$ through $\mathbf{p}$.

By the transversality theorem, the intersection $P\cap M$, being transversal, is smooth. We call such a plane curce a *normal section* of the surface through $\mathbf{p}$. Assuming that the normal section have smooth parametrizations, we can compute the curvature of a normal section with respect to $N_\mathbf{p}$.

Each unit tangent vector $X_\mathbf{p}$ to the surface $M$ at $\mathbf{p}$ determines together with $N_\mathbf{p}$ a plane that slices $M$ along a normal section. Moreover, the unit tangent vector $X_\mathbf{p}$ determines an orientation of the normal section. Let $\gamma(s)$ be the arc length parametrization of this normal section with initial point $\gamma(0) = \mathbf{p}$ and initial vector $\gamma'(0) = X_\mathbf{p}$. Note that $\gamma(s)$ is completely determined by the unit tangent vector $X_\mathbf{p}$. Define the *normal curvature* of the normal section $\gamma'(s)$ at $\mathbf{p}$ with respect to $N_\mathbf{p}$ by

$$
  \kappa(X_\mathbf{p}) = \langle\gamma''(0), N_\mathbf{p}\rangle
$$

Since the set of all unit vectors in $T_\mathbf{p} M$ is a circle, it follows that $\kappa:\mathbb{S}^1 \to\R$. Clearly, $\kappa(-X_\mathbf{p}) = \kappa(X_\mathbf{p})$ for $X_\mathbf{p}\in \mathbb{S}^1$, because replacing a unit tangent vector by its negative simply reverses the orientation of the normal section, which reverses the sign of the first derivative $\gamma'(s)$ but does not change the sign of the second derivative $\gamma''(s)$.

The maximum and minimum values $\kappa_1,\kappa_2$ of the function $\kappa$ are the *principal curvatures* of the surface at $\mathbf{p}$. Their average $H = \frac{(\kappa_1 + \kappa_2)}{2}$ is the *mean curvature*, and their product $K = \kappa_1 \kappa_2$ is the *Gaussian curvature*. A unit direction $X_\mathbf{p}\in T_\mathbf{p}M$ along which a principal curvature occurs is called a *principal direction*. Note that if $X_\mathbf{p}$ is a principal direction, then so is $-X_\mathbf{p}$, since $\kappa(-X_\mathbf{p}) = \kappa(X_\mathbf{p})$. If $\kappa_1$ and $\kappa_2$ are equal, then every unit vector in $T_\mathbf{p} M$ is a principal direction.

Using $-N_\mathbf{p}$ instead of $N_\mathbf{p}$ reverses the sign of all the normal curvatures at $\mathbf{p}$. This will change the sign of the mean curvature, but it leaves the Gaussian curvature invariant. Thus, the Gaussian curvature is independent of the choice of the unit normal vector field $N$.

### Normal vector fields

Recall that a point $\mathbf{p}\in\R^n$ is a *regular point* of a function $f:\R^n \to\R$ if the differential $f_{*,\mathbf{p}}: T_\mathbf{p}\R^n \to T_{f(\mathbf{p})}\R$ is surjective, equivalently, if at least one partial derivative $\frac{\partial f}{\partial x^i}(\mathbf{p})$ is nonzero. A point $q\in\R$ is a *regular value* if its inverse image $f^{-1}(q)$ consists entirely of regular points; otherwise, it is a *singular value*.

A *hypersurface* in $\R^n$ is the zero set $Z(f)$ of a smooth function $f$ on $\R^n$. Consider a hypersurface $M$ in $\R^3$ defined as the zero set of the smooth function $f(x,y,z)$. We assume that the partial derivatives $f_x, f_y, f_z$ dot not vanish simultaneously on $M$. Then $0$ is a regular value of $f$, and $M = f^{-1}(0)$ is a regular level set. By the regular level set theorem, $M$ is a regular submanifold of $\R^3$.

As a submanifold of $\R^3$, it follows that $M$ inherits a Riemannian metric from the Euclidean metric on $\R^3$. Let $B = \operatorname{grad}(f) = \langle f_x, f_y, f_< \rangle$ be the gradient vector field of $f$ on $M$.

<MathBox title='' boxType='proposition'>
If $0$ is a regular value of the smooth function $f$ on $\R^3$, then $N = \operatorname{grad}(f)$ is a nowhere-vanishing normal vector field along the smooth hypersurface $M = Z(f)$.

<details>
<summary>Proof</summary>

Let $\mathbf{p}\in M$ and $X_\mathbf{p}\in T_\mathbf{p}M$. It suffices to show that $\langle N_\mathbf{p},X_\mathbf{p}\rangle = 0$. Choose a curve $c(t) = (x(t), y(t), z(t))$ in $M$ with $c(0) = \mathbf{p}$ and $c'(0) = X_\mathbf{p}$. Since $c(t)$ lies on $M$, then $f(c(t)) = 0$ for all $t$. By the chain rule

$$
\begin{align*}
  0 =& \left.\frac{\mathrm{d}}{\mathrm{d}t}\right|_{t=0} f(c(t)) \\
  =& f_x (\mathbf{p})x'(0) + f_y (\mathbf{p}) y'(0) + f_z (\mathbf{p}) z'(0)
\end{align*}
$$

Hence

$$
  \langle N_\mathbf{p}, X_\mathbf{p} \rangle = \langle\operatorname{grad}(f)(\mathbf{p}), c'(0)\rangle = 0
$$
</details>
</MathBox>

By dividing $\operatorname{grad}(f)$ by its magnitude, we obtain a smooth unit normal vector field along the hypersurface $M$. Since a smooth surface in $\R^3$, orientable or not, is locally the zero set of a coordinate function, it follows from this proposition that a smooth unit normal vector field exits locally along any smooth surface in $\R^3$.

### The shape operator

Let $\mathbf{p}$ be a point on a surface $M$ in $\R^3$ and let $N$ be a smooth unit normal vector field on $M$. For any tangent vector $X_\mathbf{p}\in T_\mathbf{p}M$, define

$$
  L_\mathbf{p}(X_\mathbf{p}) := -\mathrm{D}_{X_\mathbf{p}} N
$$

This directional derivative makes sense, since $N$ is defined along some curve with initial vector $X_\mathbf{p}$. The negative sign in $L_\mathbf{p}$ assures that other formulas will be sign-free. Applying the vector $X_\mathbf{p}$ to $\langle N,N\rangle \equiv 1$ gives

$$
\begin{align*}
  0 =& X_\mathbf{p}\langle N,N\rangle \\
  =& \langle \mathrm{D}_{X_\mathbf{p}} N, N_\mathbf{p}\rangle + \langle N_\mathbf{p}, D_{X_\mathbf{p}}N \rangle \\
  =& 2\langle D_{X_\mathbf{p}} N, N_\mathbf{p}\rangle
\end{align*}
$$

Thus, $D_{X_\mathbf{p}} N$ is perpendicular to $N_\mathbf{p}$ at $\mathbf{p}$ and is therefore in the tangent plane $T_\mathbf{p} M$. So $L_\mathbf{p}$ is a linear map $T_\mathbf{p}M \to T_\mathbf{p}M$ called the *shape operator* of the *Weingarten map* of the surface $M$ at $\mathbf{p}$. Note that the shape operator depends on the unit normal vector field $N$ and the point $\mathbf{p}$. With the unit normal vector field $N$ on $M$ fixed, as the point $\mathbf{p}$ varies in $M$, there is a different shape operator $L_\mathbf{p}$ at each $\mathbf{p}$.

<MathBox title='' boxType='lemma'>
Let $M$ be a surface in $\R^3$ have a smooth unit normal vector field $N$. For $X, Y\in\mathfrak{M}$

$$
  \langle L(X), Y \rangle = \langle \mathrm{D}_X Y, N \rangle
$$

<details>
<summary>Proof</summary>

Since $Y$ is tangent to $M$, the inner product $\langle Y, N \rangle$ is identically zero on $U$. Differentiating the equation $\langle Y, N \rangel \equiv 0$ with respect to $X$ yields

$$
\begin{align*}
  0 = X \langle Y, N \rangle =& \langle\mathrm{D}_X Y, N \rangle + \langle Y, \mathrm{D}_X N \rangle \\
  =& \langle \mathrm{D}_X Y,N \rangle - \langle Y, L(X) \rangle  
\end{align*}
$$

Hence

$$
  \langle L(X),Y\rangle = \langle D_X Y, N \rangle
$$
</details>
</MathBox>

<MathBox title='' boxType='proposition'>
The shape operator in $\R^3$ is self-adjoint. That is, for any $X_\mathbf{p}, Y_\mathbf{p} \in T_\mathbf{p}M$

$$
  \langle L(X_\mathbf{p}), Y\rangle = \langle D_X Y, N \rangle
$$

<details>
<summary>Proof</summary>

Suppose the smooth unit normal vector field $N$ is defined on a neighbourhood $U$ of $\mathbf{p}$. Let $X,Y$ be vector fields on $U$ extending the vectors $X_\mathbf{p}, Y_\mathbf{p}$ at $\mathbf{p}$. By the previous lemma

$$
  \langle L(X), Y \rangle = \langle \mathrm{D}_X Y, N \rangle
$$

Similarly, reversing the roles of $X$ and $Y$, we have

$$
  \langle L(Y), X \rangle = \langle \mathrm{D}_Y X, N \rangle
$$

By the properties of the directional derivative, we have $\mathrm{D}_X Y - \mathrm{D}_Y X = [X, Y]$. Combining these equations, we get

$$
  \langle L(X),Y\rangle - \langle L(Y),X\rangle =& \langle \mathrm{D}_X Y, N \rangle - \langle\mathrm{D}_Y X, N \rangle \\
  =& \langle\mathrm{D}_X Y - \mathrm{D}_Y X, N\rangle \\
  =& \langle[X,Y], N\rangle \\
  = 0
$$

where the last equality follows since $[X,Y]$ is a tangent vector field on $M$. Hence

$$
  \langle L(X), Y \rangle = \langle L(Y), X\rangle = \langle X, L(Y)\rangle
$$
</details>
</MathBox>

If $T:V\to W$ is a linear map between two vector spaces $V$ and $W$, with respective bases $B_V = \Set{\mathbf{v}_i}_{i=1}^n$ and $B_W = \Set{\mathbf{w}_j}_{j=1}^m$, then

$$
  T(\mathbf{v}_j) = \sum_{i=1}^m a^i_j \mathbf{w}_i,\; j = 1,\dots,n
$$

for a unique matrix $[a^i_j]$, called the *matrix* of the linear map $T$ with respect to the bases $B_V$ and $B_W$. It follows from the previous propositions that the matrix of the shape operator with respect to an orthonormal basis for $T_\mathbf{p} M$ is symmetric, for if $\Set{\mathbf{e}_1,\mathbf{e}_2}$ is an orthonormal basis for $T_\mathbf{p} M$ and

$$
\begin{align*}
  L(\mathbf{e}_1) =& a\mathbf{e}_1 + b\mathbf{e}_2 \\
  L(\mathbf{e}_2) =& h\mathbf{e}_1 + c\mathbf{e}_2
\end{align*}
$$

then

$$
  b = \langle L(\mathbf{e}_1),\mathbf{e}_2\rangle = \langle\mathbf{e}_1, L(\mathbf{e}_2)\rangle = h
$$

Since the eigenvalues of a symmetric matrix are real, the shape operator has real eigenvalues.

### Curvature and the shape operator

<MathBox title='' boxType='proposition'>
Let $M$ be a surface in $\R^3$ having a smooth unit normal vector field $N$. Suppose $c:[a,b]\to M$ is a curve in $M$ and let $V(t)$ be a vector field in $M$ along $c$. Then

$$
  \langle L(c'(t)), V(t)\rangle = \left\langle \frac{\mathrm{d}V}{\mathrm{d}t}(t), N_{c(t)} \right\rangle
$$

<details>
<summary>Proof</summary>

Since $V(t)$ is tangent to $M$, then $\langle V(t), N_{c(t)}\rangle \equiv 0$. Differentiating with respect to $t$ yields

$$
  0 =& \frac{\mathrm{d}}{\mathrm{d}t} \langle V(t), N_{c(t)}\rangle \\
  =& \left\langle \frac{\mathrm{d}V}{\mathrm{d}t}(t), N_{c(t)} \right\rangle + \left\langle V(t), \frac{\mathrm{d}}{\mathrm{d}t}N_{c(t)} \right\rangle \\
  =& \left\langle \frac{\mathrm{d}V}{\mathrm{d}t}(t), N_{c(t)} \right\rangle + \langle V(t), \mathrm{D}_{c'(t)}N \rangle
$$

Thus

$$
  \langle V(t), L(c'(t)) \rangle = \langle V(t), -\mathrm{D}_{c'(t)} N\rangle = \left\langle \frac{\mathrm{d}V}{\mathrm{d}t}, N_{c(t)} \right\rangle
$$
</details>
</MathBox>

<MathBox title='' boxType='proposition'>
Let $M$ be a surface in $\R^3$ having a smooth unit normal vector field $N$. Suppose $\gamma(s)$ is a normal section, parametrized by arc length, determined by a unit tangent vector $X_\mathbf{p} \in T_\mathbf{p} M$ and the unit normal vector $N_\mathbf{p}$. Then the normal curvature of $\gamma(s)$ with respect to $N_\mathbf{p}$ at $\mathbf{p}$ is given by the second fundamental form

$$
  \kappa(X_\mathbf{p}) = \langle L(X_\mathbf{p}), X_\mathbf{p}\rangle = \mathrm{II}(X_\mathbf{p}, X_\mathbf{p})
$$

<details>
<summary>Proof</summary>

By definition, $\gamma(0) = \mathbf{p}$ and $\gamma'(0) = X_\mathbf{p}$. Let $T(s) := \gamma'(s)$ be the unit tangent vector field along $\gamma(s)$. Then the curvature of the normal section $\gamma(s)$ is

$$
\begin{align*}
  \kappa(\gamma'(s)) =& \langle\gamma''(s), N_{\gamma(s)}\rangle \\
  =& \left\langle \frac{\mathrm{d}T}{\mathrm{d}s}, N_{\gamma(s)}\right\rangle \\
  =& \langle L(\gamma'(s)), T\rangle \\
  =& \langle L(T), T \rangle
\end{align*}
$$

Evaluating at $s = 0$ gives

$$
  \kappa(X_\mathbf{p}) = \langle L(X_\mathbf{p}), X_\mathbf{p}\rangle = \mathrm{II}(X_\mathbf{p},X_\mathbf{p})
$$
</details>
</MathBox>

<MathBox title='' boxType='proposition'>
The principal directions of the surface $M$ in $\R^3$ at $\mathbf{p}$ are the unit eigenvectors of the shape operator $L$; the principal curvatures are the eigenvalues of $L$.

<details>
<summary>Proof</summary>

The principal curvatures at $\mathbf{p}$ are the maxium and minimum values of the function

$$
  \kappa(X_\mathbf{p}) = \mathrm{II}(X_\mathbf{p}, X_\mathbf{p}) = \langle L(X_\mathbf{p}), X_\mathbf{p} \rangle
$$

for $X_\mathbf{p}\in T_\mathbf{p} M$ satisfying $\langle X_\mathbf{p}, X_\mathbf{p}\rangle = 1$. Choose an orthonormal basis $\Set{\mathbf{e}_1,\mathbf{e}_2}$ for $T_\mathbf{p} M$ so that

$$
  X_\mathbf{p} = x\mathbf{e}_1 + y\mathbf{e}_2 = \begin{bmatrix} x \\ y \end{bmatrix} 
$$

Since $L$ is self-adjoint, its matrix relative to the basis $\Set{\mathbf{e}_1,\mathbf{e}_2}$ is a symmetric matrix

$$
  \mathbf{A} = \begin{bmatrix} a & b \\ b & c \begin{bmatrix}
$$

meaning that

$$
\begin{align*}
  L(\mathbf{e}_1) =& a\mathbf{e}_1 + b\mathbf{e}_2 \\
  L(\mathbf{e}_2) =& b\mathbf{e}_1 + c\mathbf{e}_2
\end{align*}
$$

In matrix notation

$$
\begin{align*}
  L(X_\mathbf{p}) =& L(x\mathbf{e}_1 + y\mathbf{e}_2) = (ax + by)\mathbf{e}_1 + (bx + cy)\mathbf{e}_2 \\
  =& \begin{bmatrix} ax + by \\ bx + cy \end{bmatrix} = \begin{bmatrix} a & b \\ b & c \end{bmatrix}\cdot\begin{bmatrix} x \\ y \end{bmatrix} = \mathbf{A}X_\mathbf{p}
\end{align*}
$$

It remains to find the extremal values of the function

$$
\begin{align*}
  \kappa(X_\mathbf{p}) =& \langle L(X_\mathbf{p}), X_\mathbf{p}\rangle = \langle \mathbf{A}X_\mathbf{p}, X_\mathbf{p}\rangle \\
  =& X_\mathbf{p}^T \mathbf{A} X_\mathbf{p} \\
  =& ax^2 + 2bxy + cy^2
\end{align*}
$$

subject to the constraint

$$
  f(X_\mathbf{p}) = \langle X_\mathbf{p}, X_\mathbf{p}\rangle = x^2 + y^2 = 1
$$

The gradient of $\kappa$ is

$$
  \operatorname{grad}(k)appa = \begin{bmatrix} 2ax + 2by \\ 2bx + 2cy \end{bmatrix} = 2\mathbf{A}X_\mathbf{p}
$$

and the gradient of $f$ is $\operatorname{grad}(g) = 2X_\mathbf{p}$. By the method of the Lagrange multiplies, at the maximum or minimum of $\kappa$, the is a scalar $\lambda$ such that

$$
  \operatorname{grad}(k)appa = \lambda\operatorname{grad}(f)
$$

or $\mathbf{A}X_\mathbf{p} = \lambda X_\mathbf{p}$. Thus, the maximum and minimum of $\kappa$ occur at the unit eigenvectors of $\mathbf{A}$. These are the principal directions at $\mathbf{p}$.

Let $X_\mathbf{p}$ be a principal direction at $\mathbf{p}$. Then the corresponding principal curvaturre is the normal curvature

$$
\begin{align*}
  \kappa(X_\mathbf{p}) =& \langle L(X_\mathbf{p}), X_\mathbf{p}\rangle = \langle\mathbf{A}X_\mathbf{p}, X_\mathbf{p}\rangle \\
  =& \langle\lambda X_\mathbf{p}, X_\mathbf{p}\rangle = \lambda\langle X_\mathbf{p},X_\mathbf{p}\rangle = \lambda 
\end{align*}
$$

which is the eigenvalue associated to the eigenvector $X_\mathbf{p}$.
</details>
</MathBox>

<MathBox title='' boxType='corollary'>
1. The Gaussian curvature of a surface $M$ in $\R^3$ is the determinant of the shape operator.
2. If $\Set{\mathbf{e}_1,\mathbf{e}_2}$ is an orthonormal basis for the tangent space $T_\mathbf{p}M$ of the surface $M$, then the Gaussian curvature at $\mathbf{p}$ is
$$
  K = \langle L(\mathbf{e}_1), \mathbf{e}_1\rangle \langle L(\mathbf{e}_2),\mathbf{e}_2\rangle - \langle L(\mathbf{e}_1), \mathbf{e}_2\rangle \langle L(\mathbf{e}_2), \mathbf{e}_1\rangle
$$

<details>
<summary>Proof</summary>

**(1):** The determinant of a linear map is the product of its eigenvalues. For the shape operator $L$ the eigenvalues are the principal curvatures $\kappa_1, \kappa_2$. So $\det(L) = \kappa_1 \kappa_2 = K$, the Gaussian curvature.

**(2):** If 

$$
\begin{align*}
  L(\mathbf{e}_1) =& a\mathbf{e}_1 + b\mathbf{e}_2 \\
  L(\mathbf{e}_2) =& b\mathbf{e}_1 + c\mathbf{e}_2
\end{align*}
$$

then

$$
\begin{align*}
  a =& \langle L(\mathbf{e}_1), \mathbf{e}_1 \rangle \\
  b =& \langle L(\mathbf{e}_1), \mathbf{e}_2 \rangle = \langle L(\mathbf{e}_2, \mathbf{e}_1) \rangle \\
  c =& \langle L(\mathbf{e}_2), \mathbf{e}_2 \rangle
\end{align*}
$$

The matrix of $L$ relative to the orthonormal basis $\Set{\mathbf{e}_1,\mathbf{e}_2}$ is $\mathbf{A} = \left[\begin{smallmatrix} a & b \\ b & c \end{smallmatrix}\right]$. Hence

$$
\begin{align*}
  \det(L) =& ac - b^2 \\
  =& \langle L(\mathbf{e}_1), \mathbf{e}_1\rangle \langle L(\mathbf{e}_2),\mathbf{e}_2\rangle - \langle L(\mathbf{e}_1), \mathbf{e}_2\rangle \langle L(\mathbf{e}_2), \mathbf{e}_1\rangle
\end{align*}
$$
</details>
</MathBox>

### The first and second fundamental forms

At a point $\mathbf{p}$ of a smooth surface $M$ in $\R^3$, the Euclidean Riemannian metric is a symmetric bilinear form on the tangent space $T_\mathbf{p} M$, called the *first fundamental form* of $M$ at $\mathbf{p}$. If $L: T_\mathbf{p} M\to T_\mathbf{p} M$ is the shape operator, the symmetric bilinear form on $T_\mathbf{p} M$

$$
  \mathrm{II}(X_\mathbf{p}, X_\mathbf{p}) = \langle L(X_\mathbf{p}), X_\mathbf{p}\rangle
$$

is called the *second fundamental form* of the surface $M$ at $\mathbf{p}$. THe first fundamental form is the metric and the second fundamental form is essentially the shape operator. These two fundamental forms encode in the much of the geometry of the surface $M$.

Let $\Set{\mathbf{e}_1,\mathbf{e}_2}$ be a basis for the tangent space $T_\mathbf{p} M$. We set

$$
\begin{align*}
  E :=& \langle\mathbf{e}_1,\mathbf{e}_1\rangle \\
  F :=& \langle\mathbf{e}_1,\mathbf{e}_2\rangle \\
  G :=& \langle\mathbf{e}_2,\mathbf{e}_2\rangle
\end{align*}
$$

If $X_\mathbf{p} = x^1 \mathbf{e}_1 + x^2 \mathbf{e}_2$ and $Y_\mathbf{p} = y^1 \mathbf{e}_1 + y^2 \mathbf{e}_2$, then

$$
\begin{align*}
  \langle X_\mathbf{p}, Y_\mathbf{p}\rangle =& \langle\mathbf{e}_1, \mathbf{e}_2\rangle x^1 y^1 + \langle\mathbf{e}_1,\mathbf{e}_2\rangle x^1 y^2 \\
  &+ \langle\mathbf{e}_2, \mathbf{e}_1 \rangle x^2 y^1 + \langle\mathbf{e}_2,\mathbf{e}_2\rangle x^2 y^2 \\
  =& Ex^1 y^1 + Fx^1 y^2 + Fx^2 y^1 + Gx^2 + y^2 \\
  =& \begin{bmatrix} x^1 & x^2 \end{bmatrix} \begin{bmatrix} E & F \\ F & G \end{bmatrix} \begin{bmatrix} y^1 \\ y^2 \end{bmatrix}
\end{align*}
$$

Thus, the three coefficients $E,F,G$ determine completely the first fundamental form of $M$ at $\mathbf{p}$ relative to $\Set{\mathbf{e}_1,\mathbf{e}_2}$.

Similarly, the three coefficients

$$
\begin{align*}
  e := \mathrm{II}(\mathbf{e}_1, \mathbf{e}_1) \\
  f := \mathrm{II}(\mathbf{e}_1, \mathbf{e}_2) \\
  g := \mathrm{II}(\mathbf{e}_2, \mathbf{e}_2)
\end{align*}
$$

determine completely the second fundamental form of $M$ at $\mathbf{p}$ $\Set{\mathbf{e}_1,\mathbf{e}_2}$

$$
  \mathrm{II}(X_\mathbf{p},X_\mathbf{p}) = \begin{bmatrix} x^1 & x^2 \end{bmatrix}\begin{bmatrix} e & f \\ f & g \end{bmatrix} \begin{bmatrix} y^1 \\ y^2 \end{bmatrix}
$$

As $\mathbf{p}$ varies in an open set $U$, if $\Set{\mathbf{e}_1,\mathbf{e}_2}$ remain a basis of $T_\mathbf{p} M$ at each point, these coefficients are six function on $U$. Classically, $M$ is taken to be a coordinate patch $(U, u, v)$ with $\mathbf{e}_1 = \frac{\partial}{\partial u}$ nad $\mathbf{e}_2 = \frac{\partial}{\partial v}$, and the differential geometry of $M$ is done in the six function $E, F, G, e, f, g$.

<MathBox title='' boxType='theorem'>
Suppose $M$ and $M'$ are two smooth Riemannian manifolds of dimension $2$, and $\varphi:M\to M'$ is a diffeomorphism. Let $E,F,G$ be the coefficients of the first fundamental form relative to a frame $\mathbf{e}_1,\mathbf{e}_2$ on $M$, and $E',F',G'$ the corresponding coefficients relative to $\mathbf{e}'_1 := \varphi_* \mathbf{e}_1$ and $\mathbf{e}'_2 := \varphi_* \mathbf{e}_2$ on $M'$. Then $\varphi$ is an isometry if and only if $E,F,G$ at $\mathbf{p}$ are equal to $E', F', G'$ at $\varphi(\mathbf{p})$, respectively, for all $\mathbf{p}\in M$.

<details>
<summary>Proof</summary>

The diffeomorphism $\varphi$ is an isomorphism if and only if

$$
  \langle \varphi_* X_\mathbf{p}, \varphi_* Y_\mathbf{p} \rangle_{\varphi(\mathbf{p})} = \langle X_\mathbf{p}, Y_\mathbf{p} \rangle_\mathbf{p}
$$

This condition holds if and only if

$$
  \langle \varphi_* \mathbf{e}_i, \varphi_* \mathbf{e}_j \rangle_{\varphi(\mathbf{p})} = \langle \mathbf{e}_i, \mathbf{e}_j \rangle_\mathbf{p}, \forall i,j = 1,2 
$$

that is

$$
\begin{align*}
  E'(\varphi(\mathbf{p})) =& E(\mathbf{p}) \\
  F'(\varphi(\mathbf{p})) =& F(\mathbf{p}) 
  G'(\varphi(\mathbf{p})) =& G(\mathbf{p}) 
\end{align*}
$$
</details>
</MathBox>

## Affine connections

On an arbitrary smooth manifold, which is not necessarily embedded in a Euclidean space, there is no longer a canonical way to define the directional derivative of a vector field. However, the directional derivative can be generalized with affine connections as a way of differentiating vector fields on smooth manifolds.

<MathBox title='Affine connection' boxType='definition'>
Let $\mathcal{F} = C^\infty (M)$ be the ring of smooth functions on $M$. An *affine connection* on a manifold $M$ is an $\R$-bilinear map

$$
  \nabla: \mathfrak{X}(M)\times\mathfrak{X}(M)\to\mathfrak{X}(M)
$$

written $\nabla_X Y$ for $\nabla(X,Y)$, satisfying the following properties:
1. $\nabla_X Y$ is $\mathcal{F}$-linear in $X$.
2. **Leibniz rule:** for $f\in\mathcal{F}$
$$
  \nabla_X (fY) = (Xf) + f\nabla_X Y
$$
</MathBox>

The directional derivative $\mathrm{D}_X$ of a vector field $Y$ on $\R^n$ is an affine connection on $\R^n$ called the *Euclidean connection* on $\R^n$.

### Torsion and curvature

<MathBox title='Torsion and curvature of affine connections' boxType='definition'>
Let $\nabla$ be an affine connection on a smooth manifold $M$. The *torsion* of $\nabla$ is bilinear map $T:\mathfrak{X}(M)\times\mathfrak{X}(M)\to\mathfrak{X}(M)$ defined by

$$
  T(X, Y) := \nabla_X Y - \nabla_Y - [X,Y]
$$

A connection $\nabla$ is *torsion-free* if its torsion is zero.

The *curvature* of $\nabla$ is a bilinear map $R:\mathfrak{X}(M)\times\mathfrak{X}(M)\to\operatorname{end}(\mathfrak{X}(M))$ defined by

$$
\begin{align*}
  R(X,Y) =& [\nabla_X, \nabla_Y] - \nabla_{[X,Y]} \\
  =& \nabla_X \nabla_Y - \nabla_Y \nabla_X - \nabla_{[X,Y]}
\end{align*}
$$
</MathBox>

An affine connection $\nabla$ on a smooth manifold $M$ gives rise to a linear map $\mathfrak{X}(M)\to\operatorname{end}_\R (\mathfrak{X}(M))$ by $X\mapsto\nabla_X$. Here both vector spaces $\mathfrak{X}(M)$ and $\operatorname{end}_\R (\mathfrak{X}(M))$ are Lie algebras. The curvature measures the deviation of the map $X\mapsto\nabla_X$ from being a Lie algebra homomorphism.

<MathBox title='Torsion and curvature of affine connections' boxType='definition'>
Let $\mathcal{F} = C^\infty (M)$ be the ring of smooth functions on $M$. Suppose $X,Y,Z$ are smooth vector fields on a smooth manifold $M$ with affine connection $\nabla$.
1. The torsion $T(X,Y)$ is $\mathcal{F}$-linear in $X$ and $Y$
2. The curvature $R(X,Y)Z$ is $\mathcal{F}$-linear in $X$, $Y$ and $Z$

<details>
<summary>Proof</summary>

**(2):** Recall from the properties of the Lie bracket that if $f,g\in \mathcal{F} = C^\infty (M)$, then

$$
  [fX, gY] = fg[X,Y] + f(Xg)Y - g(Yf)X
$$

By the definition of curvature

$$
  R(fX, Y)Z = \nabla_{fX} \nabla_Y Z - \nabla_Y \nabla_{fX} Z - \nabla_{[fX, Y]}Z
$$

By the $\mathcal{F}$-linearity of $\nabla$ in $X$, the first term is $f\nabla_X \nabla_Y Z$, and by the Leibniz rule, the second term is

$$
  \nabla_Y (f\nabla_X Z) = (Yf)\nabla_X Z + f\nabla_Y \nabla_X Z
$$

The last term is

$$
\begin{align*}
  \nabla_{[fX,Y]} Z =& \nabla_{f[X,Y] - (Yf)x} Z \\
  =& f\nabla_{[X,Y]} Z - (Yf)\nabla_X Z
\end{align*}
$$

since $X(1) = 0$. Combining the three terms gives

$$
  R(fX, Y)Z = f(\nabla_X \nabla_Y Z - \nabla_Y \nabla_X Z - \nabla_{[X,Y]} Z) \\
  =& fR(X,Y)Z
$$

Because $R(X,Y)$ is skew-symmetric in $X$ and $Y$, $\mathcal{F}$-linearity in $Y$ follows from $\mathcal{F}$-linearity in the first argument

$$
  R(X, fY) = -R(fY, X) = -fR(Y,X) = fR(X, Y)
$$
</details>
</MathBox>

### Levi-Civita connection

<MathBox title='Compatility of the metric for connections' boxType='definition'>
On a Riemannian manifold $M$, a connection $\nabla$ is *compatible with the metric* if for all $X,Y,Z\in\mathfrak{X}(M)$

$$
  Z\langle X, Y \rangle = \langle\nabla_Z X, Y \rangle + \langle X, \nabla_Z Y \rangle
$$
</MathBox>

<MathBox title='Levi-Civita connection' boxType='definition'>
On a Riemannian manifold, a *Levi-Civita connection*, also called a *Riemannian connection*, is an affine connection that is torsion-free and compatible with the metric.
</MathBox>

<MathBox title='' boxType='lemma'>
A smooth vector field $X$ on a Riemannian manifold $(M,g)$ is uniquely determined by the values $\langle X,Z \rangle$ for $Z\in\mathfrak{X}(M)$.

<details>
<summary>Proof</summary>

We need to show that if $X'\in\mathfrak{X}(M)$ and $\langle X,Z\rangle = \langle X', Z\rangle$ for all $Z\in\mathfrak{X}(M)$, then $X = X'$. With $Y = X - X'$, this is equivalent to showing that if $\langle Y,Z \rangle = 0$ for all $Z\in\mathfrak{X}(M)$, then $Y = 0$. Take $Z = Y$. By the positive-definiteness of the inner product at point $\mathbf{p}\in M$

$$
  \langle Y, Y\rangle = 0 \implies& \langle Y_\mathbf{p}, Y_\mathbf{p}\rangle = 0 \; \forall \mathbf{p}\in M \\
  \implies& Y_\mathbf{p} = 0 \; \forall \mathbf{p}\in M \\
  \implies& Y = 0
$$
</details>
</MathBox>

<MathBox title='Existence and uniqueness of the Levi-Civita connection' boxType='theorem'>
On a Riemannian manifold there is a unique Levi-Civita connection.

<details>
<summary>Proof</summary>

Suppose $\nabla$ is a Levi-Civita connection on $M$. By the previous lemma, to specify $\nabla_X Y$, it suffices to know $\langle\nabla_X Y, Z\rangle$ for every vector field $Z\in\mathfrak{X}(M)$. We seek to find a formula for $\langle\nabla_X Y, Z\rangle$ involving only the Riemannian metric and canonical operations on vector fields such as the Lie bracket.

As the Levi-Civita connection is torsion-free and compatible with the metric, it satifies the two equations

$$
\begin{gather*}
  \nabla_X Y - \nabla_Y - [X,Y] = 0 \\
  X\langle Y, Z\rangle = \langle\nabla_X Y, Z \rangle + \langle Y, \nabla_X Z \rangle
\end{gather*}
$$

Cyclically permuting $X,Y,Z$ in the last equation gives two additional equations

$$
\begin{align*}
  X\langle Y, Z\rangle =& \langle\nabla_X Y, Z \rangle + \langle Y, \nabla_X Z \rangle \\
  Y\langle Z, X\rangle =& \langle\nabla_Y Z, X \rangle + \langle Z, \nabla_Y X \rangle \\
  Z\langle X, Y\rangle =& \langle\nabla_Z X, Y \rangle + \langle X, \nabla_Z Y \rangle
\end{align*}
$$

From the torsion-free equation we can rewrite $\nabla_Y X$ in terms of $\nabla_X Y$

$$
  Y\langle Z,X\rangle = \langle\nabla_Y Z, X\rangle + \langle Z,\nabla_X Y\rangle - \langle Z, [X,Y]\rangle
$$

Subracting $Z\langle X, Y\rangle$ from $X\langle Y,Z\rangle$ and then adding $Y\langle Z, X\rangle$, will create terms involving $\nabla_X Z - \nabla_Z X$ and $\nabla_Y Z - \nabla_Z Y$, which are equal to $[X,Y]$ and $[Y,Z]$ by torsion-freeness

$$
\begin{align*}
  & X\langle Y,Z\rangle + Y\langle Z, X\rangle - Z\langle X,Y\rangle \\
  =& 2\langle\nabla_X Y, Z\rangle + \langle Y, \nabla_X Z - \nabla_Z X\rangle + \langle X, \nabla_Y Z - \nabla_Z Y\rangle - \langle Z, [X,Y]\rangle \\
  =& 2\langle\nabla_X Y,Z\rangle + \langle Y, [X,Z]\rangle + \langle X,[Y,Z]\rangle - \langle Z,[X,Y]\rangle
\end{align*}
$$

Solving for $\langle\nabla_X Y, Z\rangle$, we get

$$
\begin{align*}
  2\langle\nabla_X Y, Z\rangle =& X\langle Y,Z\rangle + Y\langle Z, X\rangle - Z\langle X,Y\rangle \\
  &- \langle X,[Y,Z]\rangle + \langle Y,[Z,X]\rangle + \langle Z,[X,Y]\rangle 
\end{align*}
$$

This formula proves that a Levi-Civita is unique if it exists.
</details>
</MathBox>

The Levi-Civita connection on $\R^n$ with its usual Euclidean metric is the directional derivative $\mathrm{D}$ on $\R^n$.

### Orthogonal projection on a surface in $\R^3$

Suppose $M$ is a smooth surface in $\R^3$, which we do not assume to be orientable. At each point $\mathbf{p}\in M$, let $\mathbf{v}_\mathbf{p}$ be the normal line through $\mathbf{p}$. It is perpendicular to the tangent space $T_\mathbf{p} M$, so there is an orthogonal decomposition

$$
  T_\mathbf{p}\R^3 \cong T_\mathbf{p} M \oplus \mathbf{v}_\mathbf{p}
$$

<MathBox title='Orthogonal projection on a surface in $\R^3$' boxType='definition'>
Let $\operatorname{pr}_\mathbf{p}: T_\mathbf{p}\R^3 \to T_\mathbf{p}M$ be the projection to the tangent space of $M$ at $\mathbf{p}$. If $X$ is a smooth vector field along $M$ in $\R^3$, then $X_\mathbf{p}\in T_\mathbf{p}\R^3$. The orthogonal projection of $X$ on M is a vector field $\operatorname{pr}(X)$ on $M$ defined by

$$
  \operatorname{pr}(X)_\mathbf{p} = \operatorname{pr}_\mathbf{p}(X_\mathbf{p}) \in T_\mathbf{p}M
$$
</MathBox>


<MathBox title='' boxType='proposition'>
If $X$ is a smooth vector field along $M$ in $\R^3$, then the orthogonal projection $\operatorname{pr}(X)$ on $M$ is smooth.

<details>
<summary>Proof</summary>

For each $\mathbf{p}\in M$, there is a neighbourhood $U$ of $\mathbf{p}$ in $M$ on which there is a smooth unit normal vector field $N$. For $\mathbf{q}\in U$

$$
  \operatorname{pr}_\mathbf{q}(X_\mathbf{q}) = X_\mathbf{q} - \langle X_\mathbf{q}, N_\mathbf{q}\rangle N_\mathbf{q}
$$

Note that $\operatorname{pr}_\mathbf{q}$ does not depend on the choice of the unit normal vector field since $-N_\mathbf{q}$ would have given the same answer. As $\mathbf{q}$ varies in $U$, we get

$$
  \operatorname{pr}(X) = X - \langle X, N\rangle X
$$

which shows that $\operatorname{pr}(X)$ is smooth on $U$. Hence $\operatorname{pr}(X)$ is smooth at $\mathbf{p}$. Since $\mathbf{p}$ is an arbitrary ponit of $M$, the vector field $\operatorname{pr}(X)$ is smooth on $M$.
</details>
</MathBox>

According to this proposition, the projection operator is a map

$$
  \operatorname{pr}: \Gamma(T\R^3|_M) \to\mathfrak{X}(M)
$$

### The Levi-Civita connection on a surface in $\R^3$

Consider a smooth, not necessarily orientable surface $M$ in $\R^3$. Given two smooth vector fields $X,Y\in\mathfrak{X}(M)$ and a point $\mathbf{p}\in M$, the directional derivative $\mathrm{D}_{X_\mathbf{p}} Y$ is not in general tangent to $M$. Define

$$
  (\nabla_X Y)_\mathbf{p} := \nabla_{X_\mathbf{p}} Y = \operatorname{pr}_\mathbf{p}(\mathrm{D}_{X_\mathbf{p}} Y) \in T_\mathbf{p} M
$$

where $\operatorname{pr}_\mathbf{p}: T_\mathbf{p}\R^3 \to T_\mathbf{p}M$ is the orthogonal projection. As $\mathbf{p}$ varies over $M$, then

$$
  \nabla_X Y = \operatorname{pr}(\mathrm{D}_X Y)
$$

which by the previous proposition shows that $\nabla X Y$ is a smooth vector field on $M$, giving a map

$$
  \nabla:\mathfrak{X}(M)\times\mathfrak{X}(M)\to\mathfrak{X}(M)
$$

<MathBox title='' boxType='proposition'>
The Levi-Civita connection on a smooth, not necessarily orientable surface $M$ in $\R^3$ is given by $\nabla_X Y = \operatorname{pr}(\mathrm{D}_X Y)$.
</MathBox>

## Gauss's Theorema Egregium for $\R^3$

Suppose $M$ is a regular submanifold of $\R^n$. For $X$ a tangent vector field on $M$ and $Z$ a vector field along $M$ in $\R^n$, the directional derivative $\mathrm{D}_X Z$ is a vector field along $M$ in $\R^n$. Since the Levi-Civita connection $\nabla$ of a surface $M$ in $\R^3$ is defined in terms of the directional derivative $\mathrm{D}$ on $M$, it is easy to compare the curvature tensors of $\nabla$ and $\mathrm{D}$. This will lead to a formula for the curvature $R$ of $\nabla$, called the *Gauss curvature equation*.

A vector field $Y\in\mathfrak{X}(M)$ is also a vector field along $M$ in $\R^3$. Hence, if $X,Y\in\mathfrak{X}(M)$, the directional derivative $\mathrm{D}_X Y$ makes sense. Assume $M$ is oriented with a unit normal vector field $N$. At any point $\mathbf{p}\in M$, the normal component of the vector $\mathrm{D}_{X_\mathbf{p}} Y$ is $\langle \mathrm{D}_{X_\mathbf{p}} Y, N_\mathbf{p}\rangle N_\mathbf{p}$, and therefore the tangent component is

$$
  \operatorname{pr}(\mathrm{D}_{X_\mathbf{p}} Y) = \mathrm{D}_{X_\mathbf{p}} Y - \langle \mathrm{D}_{X_\mathbf{p}} Y, N_\mathbf{p}\rangle N_\mathbf{p}
$$

This is the definition of the Levi-Civita connection $\nabla_{X_\mathbf{p}} Y$ on $M$. Hence

$$
\begin{align*}
  \mathrm{D}_{X_\mathbf{p}} Y =& \nabla_{X_\mathbf{p}} Y + \langle \mathrm{D}_{X_\mathbf{p}} Y, N_\mathbf{p}\rangle N_\mathbf{p} \\
  =& \nabla_{X_\mathbf{p}} Y + \langle L_\mathbf{p}(X_\mathbf{p}), Y_\mathbf{p}\rangle N_\mathbf{p}
\end{align*}
$$

Globalizing this equation, we have for $X, Y\in\mathfrak{X}(M)$

$$
  \mathrm{D}_X Y = \nabla_X Y + \langle L(X), Y\rangle N
$$

which decomposes the vector field $\mathrm{D}_X Y$ into its tangential and normal components.

<MathBox title='Gauss curvature equation' boxType='theorem'>
Let $M$ be an oriented surface in $\R^3$, $\nabla$ its Levi-Civita connection, $R$ the curvature operator of $\nabla$, and $L$ the shape operator on $M$. For $X,Y,Z\in\mathfrak{X}(M)$, the Gauss curvature equation is given by

$$
  R(X,Y)Z = \langle L(Y), Z\rangle L(X) - \langle L(X), Z\rangle L(Y)
$$

<details>
<summary>Proof</summary>

Recall that for $X,Y\in\mathfrak{X}(M)$ and $Z\in\Gamma(T\R^n |_M)$, we have

$$
  R_\mathrm{D}(X, Y)Z := \mathrm{D}_X \mathrm{D}_Y Z - \mathrm{D}_Y \mathrm{D}_X Z - \mathrm{D}_{[X,Y]}Z = 0
$$

Decomposing $\mathrm{D}_Y Z$ into its tangential and normal components we get $\mathrm{D}_Y Z = \lambda_Y Z + \langle L(Y), Z\rangle N$. Thus,

$$
\begin{align*}
  \mathrm{D}_X \mathrm{D}_Y Z =& \mathrm{D}_X \nabla_Y Z + \mathrm{D}_X (\langle L(Y), Z\rangle N) \\
  =& \nabla_X \nabla_Y Z + \langle L(X), \nabla_Y Z\rangle N + X\langle L(Y), Z\rangle N + \langle L(Y),Z\rangle\mathrm{D}_X N \\
  =& \nabla_X \nabla_Y Z - \langle L(X),Z\rangle L(X) + \langle L(X),\nabla_Y Z\rangle N + X\langle L(Y), Z\rangle N  
\end{align*}
$$

Interchanging $X$ and $Y$ gives

$$
  \mathrm{D}_Y \mathrm{D}_X Z = \nabla_Y \nabla_X Z - \langle L(X),Z\rangle L(Y) + \langle L(Y), \nabla_X Z\rangle N + Y\langle L(X), Z\rangle N
$$

Also

$$
  \mathrm{D}_{[X,Y]} Z = \nabla_{[X,Y]}Z + \langle L([X,Y]), Z\rangle N
$$

Subtracting $\mathrm{D}_X \mathrm{D}_X Z$ and $\mathrm{D}_{[X,Y]} Z$ from $\mathrm{D}_X \mathrm{D}_Y Z$ shows that $R_\mathrm{D}$ can be decomposed into a tangential and normal component

$$
\begin{align*}
  0 =& R_\mathrm{D}(X,Y)Z \\
  =& (R(X,Y)Z - \langle L(Y), Z\rangle L(X) + \langle L(X), Z\rangle L(Y))\quad\text{(normal component)} \\
  &+ (\langle L(X), \nabla_Y Z\rangle + X\langle L(Y), Z\rangle - \langle L(Y), \nabla_X Z\rangle - Y\langle L(X), Z\rangle - \langle L([X,Y]), Z\rangle) N
\end{align*}
$$

The tangential component gives the Gauss curvature equation

$$
  R(X,Y) = \langle L(Y), Z\rangle L(X) - \langle L(X),Z\rangle L(Y)
$$
</details>
</MathBox>

<MathBox title='Codazzi-Mainardi equation' boxType='theorem'>
Let $M$ be an oriented surface in $\R^3$, $\nabla$ its Levi-Civita connection, $R$ the curvature operator of $\nabla$, and $L$ the shape operator on $M$. For $X,Y,Z\in\mathfrak{X}(M)$, the Codazzi-Mainardi equation is given by

$$
  \nabla_X L(Y) - \nabla_Y L(X) - L([X,Y]) = 0
$$

<details>
<summary>Proof</summary>

Recall that for $X,Y\in\mathfrak{X}(M)$ and $Z\in\Gamma(T\R^n |_M)$, we have

$$
  R_\mathrm{D}(X, Y)Z := \mathrm{D}_X \mathrm{D}_Y Z - \mathrm{D}_Y \mathrm{D}_X Z - \mathrm{D}_{[X,Y]}Z = 0
$$

From the proof of the Gauss curvature equation, the normal component of $R_\mathrm{D}$ satisfies

$$
\begin{align*}
  0 =& (\langle L(X), \nabla_Y Z\rangle + X\langle L(Y), Z\rangle - \langle L(Y), \nabla_X Z\rangle \\
  &- Y\langle L(X), Z\rangle - \langle L([X,Y]), Z\rangle) N
\end{align*}
$$

By the compatibility of $\nabla$ with the matrix, this simplifies to

$$
  \langle\nabla_X L(Y), Z\rangle - \langle\nabla_Y L(X), Z\rangle - \langle L([X,Y]),Z\rangle = 0
$$

Since the equation is true for all $X$, by the nondegeneracy of the inner product we get

$$
  \nabla_X L(Y) - \nabla_Y L(X) - L([X,Y]) = 0
$$
</details>
</MathBox>

<MathBox title="Gauss's Theorema Egregrium for $\R^3$" boxType='theorem'>
Let $M$ be a surface in $\R^3$ and $\mathbf{p}$ a point in $M$.
1. If $\Set{\mathbf{e}_1,\mathbf{e}_2}$ is an orthonormal basis for the tangent plane $T_\mathbf{p}M$, then the Gaussian curvature $K_\mathbf{p}$ of $M$ at $\mathbf{p}$ is
$$
  K_\mathbf{p} = \langle R_\mathbf{p}(\mathbf{e}_1,\mathbf{e}_2)\mathbf{e}_2, \mathbf{e}_1 \rangle
$$
2. The Gaussian curvature is an isometric invariant of smooth surfaces in $\R^3$.

<details>
<summary>Proof</summary>

**(1):** The Gaussian curvature $K_\mathbf{p}$ is given in terms of the shape operator $L$ by

$$
  K_\mathbf{p} = \langle L(\mathbf{e}_1),\mathbf{e}_1\rangle \langle L(\mathbf{e}_2), \mathbf{e}_2\rangle - \langle L(\mathbf{e}_1),\mathbf{e}_2\rangle \rangle L(\mathbf{e}_2), \mathbf{e}_1\rangle
$$

By the Gauss curvature equation,

$$
  R_\mathbf{p}(\mathbf{e}_1,\mathbf{e}_2)\mathbf{e}_2 = \langle L(\mathbf{e}_2), \mathbf{e}_2 \rangle L(\mathbf{e}_1) - \langle L(\mathbf{e}_1),\mathbf{e}_2 \rangle L(\mathbf{e}_2)
$$

Taking the inner product with $\mathbf{e}_1$ gives

$$
\begin{align*}
  \langle R_\mathbf{p} (\mathbf{e}_1,\mathbf{e}_2)\mathbf{e}_2,\mathbf{e}_1 \rangle =& \langle L(\mathbf{e}_2), \mathbf{e}_2 \rangle \langle L(\mathbf{e}_1),\mathbf{e}_1 \rangle - \langle L(\mathbf{e}_1),\mathbf{e}_2 \rangle \langle L(\mathbf{e}_2), \mathbf{e}_1 \rangle \\
  =& K_\mathbf{p}
\end{align*}
$$
</details>
</MathBox>

### Gaussian curvature in terms of an arbitrary basis

<MathBox title='' boxType='definition'>
Let $M$ be a smooth surface in $\R^3$ and $\mathbf{p}\in M$. If $\mathbf{u},\mathbf{v}$ is any basis for the tangent plane $T_\mathbf{p} M$, then the Gaussian curvature at $\mathbf{p}$ is

$$
  K_\mathbf{p} = \frac{\langle R_\mathbf{p} (\mathbf{u},\mathbf{v})\mathbf{v}, \mathbf{u} \rangle}{\langle \mathbf{u},\mathbf{u}\rangle \langle \mathbf{v},\mathbf{v}\rangle - \langle\mathbf{u},\mathbf{v}\rangle^2}
$$

<details>
<summary>Proof</summary>

Let $\Set{\mathbf{e}_1,\mathbf{e}_2}$ be an orthonormal basis for $T_\mathbf{p} M$ and suppose

$$
\begin{align*}
  \mathbf{u} =& a\mathbf{e}_1 + b\mathbf{e}_2 \\
  \mathbf{v} =& c\mathbf{e}_1 + d\mathbf{e}_2
\end{align*}
$$

By the skew-symmetry of the curvature tensor

$$
  R_\mathbf{p} (\mathbf{u},\mathbf{v}) = (ad-bc)R_\mathbf{p}(\mathbf{e}_1,\mathbf{e}_2)
$$

so that

$$
  \langle R_\mathbf{p}(\mathbf{u},\mathbf{v})\mathbf{v},\mathbf{u}\rangle = (ad-bc)^2 \langle R_\mathbf{p}(\mathbf{e}_1,\mathbf{e}_2)\mathbf{e}_2,\mathbf{e}_1 \rangle
$$

On the other hand

$$
\begin{align*}
  &\langle\mathbf{u},\mathbf{u}\rangle\langle\mathbf{v},\mathbf{v}\rangle - \langle\mathbf{u},\mathbf{v}\rangle^2 \\
  =& (a^2 + b^2)(c^2 + d^2) - (ac + bd)^2 \\
  =& (ad - bc)^2
\end{align*}
$$

Hence

$$
\begin{align*}
  K_\mathbf{p} =& \langle R_\mathbf{p}(\mathbf{e}_1,\mathbf{e}_2)\mathbf{e}_2,\mathbf{e}_1\rangle \\
  =& \frac{\langle R_\mathbf{p}(\mathbf{u},\mathbf{v})\mathbf{v},\mathbf{u}\rangle}{\langle\mathbf{u},\mathbf{u}\rangle\langle\mathbf{v},\mathbf{v}\rangle - \langle\mathbf{u},\mathbf{v}\rangle^2}
\end{align*}
$$
</details>
</MathBox>

## Generalizations to hypersurfaces in $\R^{n+1}$

### The shape operator of a hypersurface

A *hypersurface* $M$ in $\R^{n+1}$ is a submanifold of codimension $1$. Assume there is a smooth unit normal vector field $N$ on $M$; note that this is always possible locally on any hypersurface. Recall that the directional derivative $\mathrm{D}$ on $\R^{n+1}$ is the Levi-Civita connection of $\R^{n+1}$.

For any point $\mathbf{p}\in M$ and tangent vector $X_\mathbf{p}\in T_\mathbf{p}M$, since $\langle N,N\rangle\equiv 1$

$$
  0 = X_\mathbf{p}\langle N,N\rangle = 2\langle\mathrm{D}_{X_\mathbf{p} N, N}\rangle
$$

Therefore, $\mathrm{D}_{X_\mathbf{p}}N$ is tangent to $M$. The *shape operator* $L_\mathbf{p}: T_\mathbf{p}M \to T_\mathbf{p}M$ is defined to be

$$
  L_\mathbf{p}(X_\mathbf{p}) = -\mathrm{D}_{X_\mathbf{p}}N,\; X_\mathbf{p}\in T_\mathbf{p}M
$$

As the point $\mathbf{p}$ varies over $M$, the shape operator globalizes to an $\mathcal{F}$-linear map $L:\mathfrak{X}(M)\to\mathfrak{X}(M)$ given by $L(X)_\mathbf{p} = L_\mathbf{p}(X_\mathbf{p})$.

<MathBox title='Properties of the shape operator on hypersurfaces in $\R^{n+1}$' boxType='definition'>
Let $X,Y\in\mathfrak{X}(M)$ be smooth vector fields on an oriented hypersurface $M$ in $\R^{n+1}$. Then
1. $\langle L(X), Y\rangle = \langle\mathrm{D}_X Y, N\rangle$
2. the shape operator is self-adjoint with respect to the Euclidean metric inherited from $\R^{n+1}$
$$
  \langle L(X),Y\rangle = \langle X,L(Y)\rangle
$$

<details>
<summary>Proof</summary>

Since $\langle Y, N\rangle = 0$, by the compatibility of $\mathrm{D}$ with the metric

$$
  0 = X\langle Y,N\rangle = \langle \mathrm{D}_X Y, N\rangle + \langle Y, \mathrm{D}_X N\rangle
$$

Hence

$$
  \langle \mathrm{D}_X Y, N\rangle = \langle Y, -\mathrm{D}_X N\rangle = \langle Y, L(X)\rangle
$$

Reversing the roles of $X$ and $Y$ gives

$$
  \langle \mathrm{D}_Y X, N\rangle = \langle X, L(Y)\rangle
$$

Since $[X,Y]$ is tangent to $M$

$$
  \langle [X,Y], N\rangle = 0
$$

By torsion-freeness, subtracting $\langle D_Y X, N\rangle$ and $\langle [X,Y], N\rangle$ from $\langle \mathrm{D}_X Y, N\rangle$ gives

$$
\begin{align*}
  0 =& \langle \mathrm{D}_X Y - \mathrm{D}_Y X - [X,Y], N\rangle \\
  =& \langle Y, L(X)\rangle - \langle X,L(Y)\rangle
\end{align*}
$$
</details>
</MathBox>

<MathBox title='Principal, mean and Gaussian curvature of hypersurfaces in $\R^{n+1}$' boxType='definition'>
Let $M$ be a hypersurface in $\R^{n+1}$ and $L_\mathbf{p}: T_\mathbf{p}M \to T_\mathbf{p} M$ be the shape operator at a point $\mathbf{p}\in M$. The following curvature measures can be defined on $M$ at $\mathbf{p}$:
1. The *principal curvatures* are the eigenvalues $\lambda_i$ of $L_\mathbf{p}$.
2. The *mean curvature* is the average of the principal curvatures, or the trace of $L_\mathbf{p}$
$$
  H(\mathbf{p}) = \frac{1}{n}\sum_{i=1}^n \lambda_i = \frac{1}{n}\operatorname{tr}(L_\mathbf{p})
$$
3. The *Gaussian curvature* is the product of the principal curvatures, or the determinant of $L_\mathbf{p}$
$$
  K(\mathbf{p}) = \prod_{i=1}^n \lambda_i = \det(L_\mathbf{p})
$$
</MathBox>

### The Levi-Civita connection on a hypersurface

<MathBox title='' boxType='theorem'>
Let $M$ be a hypersurface in $\R^{n+1}$ and $\mathrm{D}$ the directional derivative on $\R^{n+1}$. For $X,Y\in\mathfrak{X}(M)$ the tangential component of $\mathrm{D}_X Y$ defines the Levi-Civita connection $\nabla$ of $M$

<details>
<summary>Proof</summary>

Since it is evident that $\nabla$ satisfies the two defining properties of a connection it suffices to check that $\nabla_X Y$ is torsion free and compatible with the metric.

**Torsion-freeness:** Let $T_\mathrm{D}$ and $T_\nabla$ be the torsions of $\mathrm{D}$ and $\nabla$, respectively. By definition, for $X,Y\in\mathfrak{X}(M)$

$$
\begin{align*}
  \mathrm{D}_X Y =& \nabla_X Y + (\mathrm{D}_X Y)_{\mathrm{nor}} \\
  \mathrm{D}_Y X =& \nabla_Y X + (\mathrm{D}_Y X)_{\mathrm{nor}}
\end{align*}
$$

Since $\mathrm{D}$ is torsion-free, $\mathrm{D}_X Y - \mathrm{D}_Y X = [X,Y]$. Equating the normal components of both sides, we get $(\mathrm{D}_X Y)_\mathrm{nor} - (\mathrm{D}_Y X)_\mathrm{nor} = 0$. Thus,

$$
\begin{align*}
  0 =& T_\mathrm{D}(X,Y) \\
  =& \mathrm{D}_X Y - \mathrm{D}_Y X - [X,Y] \\
  =& (\nabla_X Y - \nabla_Y X - [X,Y]) + (\mathrm{D}_X Y)_\mathrm{nor} - (\mathrm{D}_Y X)_\mathrm{nor} \\
  =& \nabla_X Y - \nabla_Y X - [X,Y] = T_\nabla (X,Y)
\end{align*}
$$

**Compatibility with the metric:** For $X,Y,Z\in\mathfrak{X}(M)$

$$
\begin{align*}
  X\langle Y, Z\rangle =& \langle\mathrm{D}_X Y, Z\rangle + \langle Y, \mathrm{D}_X Z\rangle \\
  =& \langle\nabla_X Y + (\mathrm{D}_X Y)_\mathrm{nor} Z \rangle + \langle Y, \nabla_X Z + (\nabla_X Y)_\mathrm{nor}\rangle \\
  =& \langle \nabla_X Y, Z \rangle + \langle Y, \nabla_X Z \rangle
\end{align*}
$$
</details>
</MathBox>

### Fundamental forms

At each point $\mathbf{p}$ of an oriented hypersurface $M\subseteq\R^{n+1}$, there is a sequence of symmetric bilinear maps on $T_\mathbf{p}M$ called the *first*, *second* and *third fundamental forms* and so on

$$
\begin{align*}
  \matrm{I}(X_\mathbf{p},Y_\mathbf{p}) =& \langle X_\mathbf{p}, Y_\mathbf{p}\rangle \\
  \mathrm{II}(X_\mathbf{p},Y_\mathbf{p}) =& \langle L(X_\mathbf{p}), Y_\mathbf{p}\rangle = \langle X_\mathbf{p}, L(Y_\mathbf{p})\rangle \\
  \mathrm{III}(X_\mathbf{p},Y_\mathbf{p}) =& \langle L^2 (X_\mathbf{p}), Y_\mathbf{p}\rangle = \langle L(X_\mathbf{p}),L(Y_\mathbf{p})\rangle = \langle X_\mathbf{p}, L^2 (Y_\mathbf{p})\rangle, \dots
\end{align*}
$$

For $X,Y\in\mathfrak{X}(M)$, the directional derivative $\mathrm{D}_X Y$ decomposes into the sum of a tangential and normal component. The tangential component is the Levi-Civita connection on $M$; the normal component is essentially the second fundamental form.

<MathBox title='' boxType='theorem'>
If $N$ is a smooth unit normal vector field on the hypersurface $M$ in $\R^{n+1}$ and $X,Y\in\mathfrak{X}(M)$ are smooth vector fields on $M$, then

$$
  (\mathrm{D}_X Y)_\mathrm{nor} = \mathrm{II}(X,Y)N
$$

<details>
<summary>Proof</summary>

The normal component $(\mathrm{D}_X Y)_\mathrm{nor}$ is a multiple of $N$, so

$$
  \mathrm{D}_X Y =& (\mathrm{D}_X Y)_\mathrm{tan} + (\mathrm{D}_X Y)_\mathrm{nor} \\
  =& lambda_X Y + \lambda N
$$

for some $\lambda\in\R$. Taking the inner product of both sides with $N$ gives

$$
  \langle \mathrm{D}_X,N\rangle = \lambda\langle N,N\rangle = \lambda
$$

Hence

$$
\begin{align*}
  (\mathrm{D}_X Y)_\mathrm{nor} =& \langle\mathrm{D}_X Y,N\rangle N \\
  =& \langle L(X), Y\rangle N \\
  =& \mathrm{II}(X,Y)N
\end{align*}
$$
</details>
</MathBox>

### The Gauss curvature and Codazzi-Mainardi equations

Let $M$ be an oriented, smooth hypersurface in $\R^{n+1}$, with a smooth unit normal vector field $N$. The relation between the Levi-Civita connection $\mathrm{D}$ on $\R^{n+1}$ and the Levi-Civita connection on $M$ implies a relation between the curvature $R_\mathrm{D}(X,Y)Z = 0$ on $\R^{n+1}$ and the curvature $R(X,Y)Z$ on $M$. The tangential component of this relation gives the Gauss curvature equation

$$
  R(X,Y) = \langle L(Y), Z\rangle L(X) - \langle L(X), Z\rangle L(Y)
$$

and the normal component gives the Codazzi-Mainardi equation

$$
  \nabla_X L(Y) - \nabla_Y L(X) - L([X,Y]) = 0
$$

<MathBox title='' boxType='corollary'>
If $M$ is a smooth oriented hypersurface in $\R^{n+1}$ with curvature $R$ and $X,Y\in\mathfrak{X}(M)$, then

$$
  \langle R(X,Y)Y, X\rangle = \mathrm{II}(X,X)\mathrm{II}(Y,Y) - \mathrm{II}(X,Y)^2
$$

<details>
<summary>Proof</summary>

By the Gauss curvature equation

$$
\begin{align*}
  \langle R(X,Y)Y, X\rangle =& \langle L(Y), Y\rangle \langle L(X),X\rangle - \langle L(X), Y\rangle\langle L(Y),X\rangle \\
  =& \mathrm{II}(X,X)\mathrm{II}(Y,Y) - \mathrm{II}(X,Y)^2
\end{align*}
$$
</details>
</MathBox>

# Curvature and differential forms

## Connections on a vector bundle

<MathBox title='Connection on vector bundles' boxType='definition'>
Let $E\to M$ be a smooth vector bundle over a smooth manifold $M$. A connection on $E$ is a map

$$
  \nabla:\mathfrak{X}(M)\times\Gamma(E)\to\Gamma(E)
$$

such that for $X\in\mathfrak{X}(M)$ and $\mathbf{s}\in\Gamma(E)$
1. $\nabla_X \mathbf{s}$ is $\mathcal{F}$-linear in $X$ and $\R$-linear in $\mathbf{s}$, where $\mathcal{F} = C^\infty (M)$ is the ring of smooht functions on $M$
2. **Leibniz rule:** if $f$ is a smooth function on $M$, then
$$
  \nabla_X (f\mathbf{s}) = (Xf)\mathbf{s} + f\nabla_X \mathbf{s}
$$

Since $Xf = (\mathrm{d}f)(X)$, the Leibniz rula can be written as

$$
  \nabla_X f(f\mathbf{s}) = (\mathrm{d}f)(X)\mathbf{s} + f\nabla_X \mathbf{s}
$$

or, suppressing $X$,

$$
  \nabla (fs) = \mathrm{d}f\cdot\mathbf{s} + f\nabla\mathbf{s}
$$
</MathBox>

<MathBox title='Induced connection on a trivial bundle' boxType='example'>
Let $E$ be a trivial bundle of rank $r$ over a smooth manifold $M$. There is a bundle isomorphism $\phi:E\to M\times\R^r$, called a *trivialization* for $E$ over $M$. The trivialization $\phi: E \xrightarrow{\sim} M\times\R^r$ induces a connection on $E$ as follows. If $\Set{\mathbf{v}_i}_{i=1}^r$ is a basis for $\R^r$, then $s_i: p\mapsto (\mathbf{p},\mathbf{v}_i)$ for $i=1,\dots,r$ define a global frame fro the product bundle $M\times\R^r$ over $M$, and $\mathbf{e}_i = \phi^{-1} \circ s_i$ define a global frame for $E$ over $M$. Every section $\mathbf{s}\in\Gamma(E)$ can be written uniquely as a linear combination

$$
  \mathbf{s} = \sum_{i=1}^r h^i \mathbf{e}_i,\; h^i \in\mathcal{F} = C^\infty
$$

We can define a connection $\nabla$ on $E$ by declaring the sections $\mathbf{e}_i$ to be flat and applying the Leibniz rule and $\R$-linearity to define the connection

$$
  \nabla_X \mathbf{s} = \nabla_X \left(\sum_{i=1}^r h^i \mathbf{e}_i \rigth) = \sum_{i=1}^r (Xh^i)\mathbf{e}_i
$$

The connection $\nabla$ on a trivial bundle induced by a trivialization depends on the trivialization, for the flat section for $\nabla$ are presicely the section of $E$ corresponding to the constant sections of $M\times\R^r$ under the trivialization.
</MathBox>

## Existence of a connection on a vector bundle

Let $\nabla^0$ and $\nabla^1$ be two connections on a vector bundle $E$ over $M$. By the Leibniz rule, for any vector field $X\in\mathfrak{X}(M)$, section $\mathbf{s}\in\Gamma(E)$ and function $f\in C^\infty (M)$

$$
\begin{align*}
  \nabla_X^0 (f\mathbf{s}) =& (Xf)\mathbf{s} + f\nabla_X^0 \mathbf{s} \\
  \nabla_X^1 (f\mathbf{s}) =& (Xf)\mathbf{s} + f\nabla_X^1 \mathbf{s} 
\end{align*}
$$

Thus

$$
  (\nabla_X^0 + \nabla_X^1)(f\mathbf{s}) = 2(Xf)\mathbf{s} + f(\nabla_X^0 + \nabla_X^1)\mathbf{s}
$$

Because of the extra factor of $2$ the sum of two connections does not satisfy the Leibniz rule and so is not a connection. However, if we multiply by \nabla_X^0 (f\mathbf{s})$ by $1-t$ and $\nabla_X^1 (f\mathbf{s})$ by $t$, then $(1-t)\nabla_X^0 + t\nabla_X^1$ satisfies the Leibniz rule.

<MathBox title='' boxType='proposition'>
Any finite linear combination $\sum t_i \nabla^i$ of connections $\nabla^i$ is a connection provided that the coefficients add up to $1$, i.e. $\sum_i t_i = 1$. Such a linear combination is called *convex*.
</MathBox>

<MathBox title='Existence of connections on vector bundles' boxType='theorem'>
Every smooth vector bundle $E$ over a manifold $M$ has a connection.

<details>
<summary>Proof</summary>

Fix a trivializing open cover $\Set{U_\alpha}$ for $E$ and a partition of unity $\Set{\rho_\alpha}$ subordinate to $\Set{U_\alpha}$. On each $U_\alpha$, the vector bundle $E|_{U_\alpha}$ is trivial and so has a connection $\lambda^\alpha$. For $X\in\mathcal{X}(M)$ and $\mathbf{s}\in\Gamma(E)$, dented by $\mathbf{s}_\alpha$ the restriction of $\mathbf{s}$ to $U_\alpha$ and define

$$
  \nabla_X \mathbf{s} = \sum_\alpha \rho_\alpha \nabla_X^\alpha \mathbf{s}_\alpha
$$

Although this looks like an infinite sum, it is in fact a finite sum in a neighbourhood of each point $\mathbf{p}\in M$, for by the local finiteness of $\Set{\operatorname{supp}(\rho_\alpha)}$, there is an open neighbourhood $U$ of $\mathbf{p}$ intersecting only finitely many of the sets $\operatorname{supp}(\rho_\alpha)$. This means that on $U$ all except finitely many of the $\rho_\alpha$ are zero and so $\sum_\alpha \rho_\alpha \nabla_X^\alpha \mathbf{s}_\alpha$ is a finite sum on $U$ with $\sum_\alpha \rho_\alpha = 1$.

By checking the open set $U$, it is easy to show that $\nabla_X \mathbf{s}$ is $\mathcal{F}$-linear in $X$, is $\R$-linear in $\mathbf{s}$ and satisfies the Leibniz rule. Hence, $\nabla$ is a connection on $E$.
</details>
</MathBox>

### Curvature of a connection on a vector bundle

The concept of torsion does not make sense for a connection on an arbitrary vector bundle on a smooth manifold $M$ because of the asymmetry of its two arguments. However, curvature still makes sense and is defined, as for affine connections as an $\R$-trilinear map

$$
  R:\mathfrak{X}(M)\times\mathfrak{X}(M) \times\Gamma(E)\to\Gamma(E)
$$

given by

$$
  R(X,Y)\mathbf{s} = \nabla_X \nabla_Y \mathbf{s} - \nabla_Y \nabla_X \mathbf{s} - \nabla_{[X,Y]}\mathbf{s}
$$

Let $\mathcal{F} = C^\infty$ be the ring of smooth functions on $M$. As for affine connections, $R(X,Y)\mathbf{s}$ if $\mathcal{F}$-linear in all three arguments and so it is actually defined pointwise. Moreover, because $R_\mathbf{p}(X_\mathbf{p},Y_\mathbf{p})$ is skew-symmetric in $X_\mathbf{p}$ and $Y_\mathbf{p}$, at every point $\mathbf{p}\in M$ there is an alternating bilinear map

$$
  R_\mathbf{p}: T_\mathbf{p}M\times T_\mathbf{p}M \to\hom(E_\mathbf{p},E_\mathbf{p}) =: \operatorname{end}(E_\mathbf{p})
$$

into the endomorphism ring of $E_\mathbf{p}$. This map is the *curvature tensor* of the connection $\nabla$.

### Riemannian bundles

The notion of a Riemannian metric can be generalized to vector bundles. Let $E\to M$ be a smooth vector bundle over a smooth manifold $M$. A *Riemannian metric* on $E$ assigns to each $\mathbf{p}\in M$ an inner product on the fibre $E_\mathbf{p}$. The assignment is required to be smooth in the following sense: if $\mathbf{s}$ and $\mathbf{t}$ are smooth section of $E$, then $\langle\mathbf{s},\mathbf{t}\rangle$ is a smooth function on $M$.

Thus, a Riemannian metric on a smooth manifold $M$ is simply a Riemannian metric on the tangent bundle $TM$. A vector bundle together with a Riemannian metric is called a *Riemannian bundle*.

<MathBox title='' boxType='proposition'>
Let $E$ be a trivial vector bundle of rank $r$ over a smooth manifold $M$, with trivialization $\phi:E\xrightarrow{\sim} M\times\R^r$. The Euclidean inner product on $\R^r$ induces a Riemannian metric on $E$ via the trivialization $\phi$. If $\mathbf{u},\mathbf{v}\in E_\mathbf{p}$, then the fibre map $\phi_\mathbf{p}: E_\mathbf{p}\to\R^r$ is a linear isomorphism and we define

$$
  \langle\mathbf{u},\mathbf{v}\rangle = \langle\phi_\mathbf{p}(\mathbf{u}),\phi_\mathbf{p}(\mathbf{v})\rangle_{\R^r}
$$
</MathBox>

<MathBox title='Existence of a Riemannian bundle' boxType='proposition'>
On any smooth vector bundle $\pi:E\to M$, there is a Riemannian metric.

<details>
<summary>Proof</summary>

Let $\Set{U_\alpha, \varphi_\alpha: E|_{U_\alpha} \xrightarrow{\sim} U_\alpha \times\R^k}$ be a trivializing open cover for $E$. On $E|_{U_\alpha}$ there is a Riemannian metric induced from the trivial bundle $U_\alpha \times\R^k$. Let $\Set{\rho_\alpha}$ be a partition of unity on $M$ subordinate to the open cover $\Set{U_\alpha}$. By the same reasoning as in the proof for the existence of the Riemannian metric, the sum

$$
  \langle\cdot,\cdot\rangle := \sum_\alpha \rho_\alpha \langle\cdot,\cdot\rangle_\alpha
$$

is a finite sum in a neighbourhood of each point of $M$ and is a Riemannian metric on $E$.
</details>
</MathBox>

### Metric connections

A connection $\nabla$ on a Riemannian bundle $E$ is *compatible with the metric* if for all $X\in\mathfrak{X}(M)$ and $\mathbf{s},\mathbf{t}\in\Gamma(E)$

$$
  X\langle\mathbf{s},\mathbf{t}\rangle = \langle\nabla_X \mathbf{s},\mathbf{t}\rangle + \langle\mathbf{s},\nabla_X \mathbf{t}\rangle
$$

A connection compatible with the metric on a Riemannian bundle is also called a *metric connection*.

<MathBox title='' boxType='proposition'>
On a trivial vector bundle $E$ over a smooth manifold $M$ with trivialization $\phi:E\xrightarrow{\sim} M\times\R^r$, the connection $\nabla$ on $E$ induced by the trivialization $\phi$ is compatible with the Riemannian metric on $E$ induced by the trivialization.

<details>
<summary>Proof</summary>

Let $\Set{\mathbf{v}_i}_{i=1}^r$ be an orthonormal basis for $\R^r$ and $\Set{\mathbf{e}_i}_{i=1}^r$ the corresponding global frame for $E$, where $\mathbf{e}_i (\mathbf{p}) = \phi^{-1} (\mathbf{p},\mathbf{v}_i)$. Then $\Set{\mathbf{e}_i}_{i=1}^r$ is an orthonormal flat frame for $E$ with respect to the Riemannian metric and the connection on $E$ induced by $\phi$. If $\mathbf{s} = \sum_{i=1}^r a^i \mathbf{e}_i$ and $\mathbf{t} = \sum_{j=1}^r b^j \mathbf{e}_j$ are smooth sections of $E$, then

$$
\begin{align*}
  X\langle\mathbf{s},\mathbf{t}\rangle =& X\left(\sum_{i=1}^r a^i b^i \right) \\
  =& \sum_{i=1}^r (Xa^i) b^i + \sum_{i=1}^r a^i Xb^i \\
  =& \langle \nabla_X \mathbf{s},\mathbf{t}\rangle + \langle\mathbf{s},\nabla_X \mathbf{t}\rangle
\end{align*}
$$
</details>
</MathBox>

<MathBox title='' boxType='lemma'>
Let $E\to M$ be a Riemannian bundle. Suppose $\nabla^1,\dots,\nabla^m$ are connections on $E$ compatible with the metric and $a_1,\dots,a_m$ are smooth function on $M$ that add up to $1$. Then $\nabla = \sum_{i=1}^m a_i \nabla^i$ is a connection on $E$ compatible with the metric.

<details>
<summary>Proof</summary>

Note that $\nabla$ is a connection on $E$. It remains to check that $\nabla$ is compatible with the metric. If $X\in\mathfrak{X}(M)$ and $\mathbf{s},\mathbf{t}\in\Gamma(E)$, then for all $i=1,\dots,m$

$$
  X\langle\mathbf{s},\mathbf{t}\rangle = \langle\nabla_X^i \mathbf{s},\mathbf{t}\rangle + \langle\mathbf{s},\nabla_X^i \mathbf{t}\rangle
$$

because $\nabla^i$ is compatible with the metric. Multiplying by $a_i$ and summing gives

$$
\begin{align*}
  X\langle\mathbf{s},\mathbf{t}\rangle =& \sum_{i=1}^m a_i X\langle\mathbf{s},\mathbf{t}\rangle \\
  =& \left\langle\sum_{i=1}^m a_i \nabla_X^i \mathbf{s},\mathbf{t}\right\rangle + \left\langle \mathbf{s},\sum_{i=1}^m a_i \nabla_X^i \mathbf{t}\right\rangle \\
  =& \langle \nabla_X \mathbf{s},\mathbf{t}\rangle + \langle\mathbf{s},\nabla_X \mathbf{t}\rangle
\end{align*}
$$
</details>
</MathBox>

<MathBox title='' boxType='proposition'>
On any Riemannian bundle $E \to M$, there is a connection compatible with the metric.

<details>
<summary>Proof</summary>

Choose a trivializing open cover $\Set{U_\alpha}$ for $E$. For each trivializing open set $U_\alpha$ of the cover, we can find a connection $\nabla^\alpha$ on $E|_{U_\alpha}$ compatible with the metric. Let $\Set{\rho_\alpha}$ be a partition of unity subordinate to the open cover $\Set{U_\alpha}$. Because the collection $\Set{\operatorname{supp}(\rho_\alpha)}$ is locally finite, the sum $\nabla = \sum \rho_\alpha \nabla^\alpha$ is a finite sum in a neighbourhood of each point. Since $\sum \rho_\alpha \equiv 1$, it follows that $\nabla$ is a connection on $E$ compatible with the metric.
</details>
</MathBox>

### Restricting a connection to an open subset

Let $\mathcal{F} = C^\infty (M)$ be the ring of smooth functions on a smooth manifold $M$. A connection $\nabla$ on a vector bundle $E$ over $M$ is $\mathcal{F}$-linear in the second argument, but not $\mathcal{F}$-linear in the second argument. However, it turns out that the $\mathcal{F}$-linearity in the  first argument and the Leibniz rule in the second argument are enough to imply that $\nabla$ is a local operator.

<MathBox title='Existence of connections on vector bundles' boxType='theorem'>
Let $\nabla$ be a connection on a vector bundle $E$ over a smooth manifold $M$, $X$ be a smooth vector field on $M$ and $\mathbf{s}\in\Gamma(E)$ a smooth section of $E$. If either $X$ or $\mathbf{s}$ vanishes identically on an open subsets $U$, then $\nabla_X \mathbf{s}$ vanishes identically on $U$.

<details>
<summary>Proof</summary>

Suppose $X$ vanishes identically on $U$. Since $\lambda_X \mathbf{s}$ is $\mathcal{F}$-linear in $X$, then $\nabla_X \mathbf{s}$ vanishes identically on $U$ for any $\mathbf{s}\in\Gamma(E)$.

Next suppose $\mathbf{s}\equiv 0$ on $U$ and $\mathbf{p}\in U$. Choose a smooth bump function $f$ such that $f\equiv 1$ in a neighbourhood of $\mathbf{p}$ and $\operatorname{supp}(f) \subset U$. By our choice of $f$, the derivative $X_\mathbf{p}$ is zero. Since $\mathbf{s}$ vanishes on the support of $f$, we have $f\mathbf{s} \equiv 0$ on $M$ and so $\nabla_X (f\mathbf{s}) \eqiuv 0$. Evaluating at $\mathbf{p}$ gives

$$
\begin{align*}
  0 =& (\nabla_X (f\mathbf{s})) \\
  =& (Xf)_\mathbf{p} \mathbf{s}_\mathbf{p} + f(\mathbf{p})(\nabla_X \mathbf{s})_\mathbf{p} = (\nabla_X \mathbf{s})_\mathbf{p}
\end{align*}
$$

Because $\mathbf{p}$ is an arbitrary point of $U$, we conclude that $\nabla_X \mathbf{s}$ vanishes identicall on $U$
</details>
</MathBox>

In the same way that a local operator can be restricted to any open subset, a connection on a vector bundle can be restricted to any open subset. More precisely, given a connection $\nabla$ on a vector bundle $E$, for every open set $U$ there is a connection

$$
  \nabla^U :=\mathfrak{X}(M)\times\Gamma(U,E) \to\Gamma(U,E)
$$

such that for any global vector field $\bar{X}\in\mathfrak{X}(M)$ and global sections $\bar{\mathbf{s}}\in\Gamma(E)$,

$$
  \nabla_{\bar{X}|_U}^U (\bar{\mathbf{s}}|_U) = (\nabla_{\bar{X}} \bar{\mathbf{s}})|_U
$$

Suppose $X\in\mathfrak{X}(U)$ and $\mathbf{s}\in\Gamma(U,E)$. For any $\mathbf{p}\in U$, to define $\nabla_X^U \mathbf{s}\in\Gamma(U,E)$ first pick a global vector field $\bar{X}$ and a global section $\bar{\mathbf{s}}\in\Gamma(E)$ that agree with $X$ and $\mathbf{s}$ in a neigbourhood of $\mathbf{p}$. Then define

$$
  (\nabla_X^U \mathbf{s})(\mathbf{p}) = (\nabla_{\bar{\mathbf{X}}}\mathbf{s})(\mathbf{p})
$$

Because $\nabla_{\bar{X}} \bar{\mathbf{s}}$ is a local operator in $\bar{X}$ and in $\bar{\mathbf{s}}$, this definition is independent of the choice of $\bar{X}$ and $\bar{\mathbf{s}}$. Furthermore, $\nabla^U$ satisfies all the properties of a connection on $E|_U$.

### Connections at a point

Let $\mathcal{F} = C^\infty (M)$ be the ring of smooth functions on a smooth manifold $M$. Suppose $\nabla$ is a connection on a vector bundle $E$ over $M$. For $X\in\mathfrak{X}(M)$ and $\mathbf{s}\in\Gamma(E)$, since $\nabla_X \mathbf{s}$ is $\mathcal{F}$-linear in $X$, it is a point operator in $X$ that can be defined pointwise in $X: There is a unique maps, also denoted by $\nabla$,

$$
  \nabla: T_\mathbf{p}M \times\Gamma(E)\to E_\mathbf{p}
$$

such that

$$
  \nabla_{X_\mathbf{p}}\mathbf{s} = (\nabla_X \mathbf{s})_\mathbf{p}
$$

It is easy to check that $\nabla_{X_\mathbf{p}} \mathbf{s}$ has the following properties:
1. $\nabla_{X_\mathbf{p}}\mathbf{s}$ is $\R$-linear in $X_\mathbf{p}$ and in $\mathbf{s}$
2. **Leibniz rule:** if $f$ is a smooth function on $M$, then

$$
  \nabla_{X_\mathbf{p}} (f\mathbf{s}) = (X_\mathbf{p})\mathbf{s}(\mathbf{p}) + f(\mathbf{p})\nabla_{X_\mathbf{p}} \mathbf{s}
$$

## Connection, curvature and torsion forms

### Connection and curvature forms

Let $\nabla$ be a connection on a smooth rank $r$ vector bundle $\pi:E\to M$. We are interested in describing $\nabla$ locally. On every open subset $U$ of $M$, $\nabla$ restricts to a connection on $E|_U \to U$

$$
  \nabla^U :\mathfrak{X}(U)\times\Gamma(U,E) \to\Gamma(U,E)
$$

Suppose $U$ is a trivializing open set for $E$ and $\Set{\mathbf{e}_i}_{i=1}^r$ is a frame for $E$ over $U$ and let $X\in\mathfrak{X}(U)$ be a smooth vector field on $U$. On $U$, since any section $\mathbf{s}\in\Gamma(U,E)$ is a linear combination $\mathbf{s} = \sum_{i=1}^r a^j \mathbf{e}_j$, the section $\nabla_X \mathbf{s}$ cab be computed from $\nabla_X \mathbf{e}_j$ by linearity and the Leibniz rule. As a section of $E$ over $U$, $\nabla_X \mathbf{e}_j$ is a linear combination of the $\mathbf{e}_i$ with coefficients $\omega_j^i$ depending on $X$

$$
  \nabla_X \mathbf{e}_j = \sum_{i=1}^r \omega_j^i (X) \mathbf{e}_i
$$

The $\mathcal{F}$-linearity of $\nabla_X \mathbf{e}_j$ in $X$ implies that $\omega_j^i$ is $\mathcal{F}$-linear in $X$ and so $\omega_j^i$ is a $1$-form on $U$. The $1$-forms $\omega_j^i$ on $U$ are called the *connection forms*, and dthe matrix $\omega = [\omega_j^i]$ is called the *connection matrix*, of the connection $\nabla$ relative to the frame $\Set{\mathbf{e}_i}_{i=1}^r$ on $U$.

Similarly, for $X,Y\in\mathfrak{X}(U)$, the section $R(X,Y)\mathbf{e}_j$ is a linear combination of $\mathbf{e}_i$

$$
  R(X,Y)\mathbf{e}_j = \sum_{i=1}^r \Omega_j^i (X,Y)\mathbf{e}_i
$$

Since

$$
  R(X,Y) = \nabla_X \nabla_Y - \nabla_Y \nabla_X - \nabla_{[X,Y]}
$$

is alternating and $\mathcal{F}$-bilinear, so is $\Omega_j^i$. The $2$-forms $\Omega_j^i$ are called the *curvature forms*, and the matrix $\Omega = [\Omega_j^i]$ is called the *curvature matrix*, of the connection $\nabla$ relative to the frame $\Set{\mathbf{e}_i}_{i=1}^r$ on $U$.

Recall that if $\alpha$ and $\beta$ are smooth $1$-forms and $X,Y$ are smooth vector fields on a smooth manifold, then

$$
  (\alpha\wedge\beta)(X,Y) =& \alpha(X)\beta(Y) - \alpha(Y)\beta(X) \\
  (\mathrm{d}\alpha)(X,Y) =& X\alpha(Y) - Y\alpha(X) - \alpha([X,Y])
$$

<MathBox title='Second structural equation' boxType='theorem'>
Let $\nabla$ be a connection on a vector vundle $E\to M$ of rank $r$. Relative to a frame $\Set{\mathbf{e}_i}_{i=1}^r$ for $E$ over a trivializing open set $U$, the curvature forms $\Omega_j^i$ are related to the connection forms $\omega_j^i$ by the *second structural equation*

$$
  \Omega_j^i = \mathrm{d}\omega_j^i + \sum_k \omega_k^i \wedge\omega_j^k
$$

<details>
<summary>Proof</summary>

Let $X, Y\in\mathfrak{X}(U)$ be smooth vector fields on $U$. Then

$$
\begin{align*}
  \nabla_X \nabla_Y \mathbf{e}_j =& \nabla_X \sum_k (\omega_j^k (Y)\mathbf{e}_k) \\
  =& \sum_k X\omega_j^k (Y) \mathbf{e}_k + \sum_k \omega_j^k (Y)\nabla_X \mathbf{e}_k \\
  =& \sum_i X \omega_j^i (Y)\mathbf{e}_i + \sum_{i,j} \omega_j^k (Y) \omega_k^i (X)\mathbf{e}_i
\end{align*}
$$

Interchanging $X$ and $Y$ gives

$$
  \nabla_Y \nabla_X \mathbf{e}_j = \sum_i Y \omega_j^i (X)\mathbf{e}_i + \sum_{i,k} \omega_j^k (X)\omega_k^i (Y)\mathbf{e}_i
$$

Furthermore

$$
  \nabla_{[X,Y]}\mathbf{e}_j = \sum_i \omega_j^i ([X,Y]) \mathbf{e}_i
$$

Hence

$$
\begin{align*}
  R(X,Y)\mathbf{e}_j =& \nabla_X \nabla_Y \mathbf{e}_j - \nabla_Y \nabla_X \mathbf{e}_j - \nabla_{[X,Y]}\mathbf{e}_j \\
  =& \sum_i (X\omega_j^i (Y) - Y\omega_j^i (X) - \omega_j^i ([X,Y]))\mathbf{e}_i \\
  &+ \sum_{i,k} (\omega_k^i (X)\omega_j^k (Y) - \omega_k^i (Y) \omega_j^k (X))\mathbf{e}_i \\
  =& sum_i \mathrm{d}\omega_j^i (X,Y)\mathbf{e}_i + \sum_{i,k} \omega_k^i \wedge \omega_j^k (X,Y)\mathbf{e}_i \\
  =& \sum_{i,k} (\mathrm{d}\omega_j^i + \omega_k^i \wedge \omega_j^k)(X,Y)\mathbf{e}_i
\end{align*}
$$

Compaing this with the definition of the curvature form $\Omega_j^i$ gives

$$
  \Omega_j^i = \mathrm{d}\omega_j^i + \sum_k \omega_k^i \wedge \omega_j^k
$$
</details>
</MathBox>

### Connections on a framed open set

Suppe $E$ is a smooth vector bundle of rank $r$ over a smooth manifold $M$ and $U$ is a an open subset on which there is a smooth frame $\Set{\mathbf{e}_i}_{i=1}^r$ for $E$. We call $U$ a *framed open set* for $E$ for short. A connection $\nabla$ on $E|_U$ determines a unique connection matrix $[\omega_j^i]$ relative to the frame $\Set{\mathbf{e}_i}_{i=1}^r$. Conversely, any matrix of $1$-forms $[\omega_j^i]$ on $U$ determines a connection on $E|_U$ as follows.

Given a matrix $[\omega_j^i]$ of $1$-forms on $U$, and $X, Y\in\mathfrak{X}(U)$, we set

$$
  \nabla_X \mathbf{e}_j = \sum_i \omega_j^i (X) \mathbf{e}_i
$$

and define $\nabla_X Y$ by applying the Leibniz rule to $Y = \sum_{j=1}^r y^j \mathbf{e}_j$

$$
\begin{align*}
  \nabla_X Y =& \nabla_X \left(\sum_{j=1}^r y^j \mathbf{e}_j\right) = \sum_{j=1}^r (Xy^j)\mathbf{e}_j + \sum_{i,j=1}^r y^j \omega_j^i (X)\mathbf{e}_i \\
  =& \sum_{i,j=1}^r ((Xy^i) + h^j \omega_j^i (X))\mathbf{e}_i
\end{align*}
$$

With this definition, $\nabla$ is a connection on $E|_U$.

### Metric connection relative to an orthonormal frame

We have seen that on a framed open set $U$ for a vector bundle $E\to M$, a connection is completely specified by a matrix $[\omega_j^i]$ of $1$-forms on $U$. Suppose now that the vector bundle $E\to M$ is endowed with a Riemannian metric. The defining property of a metric connection can be translated into a condition on the connection matrix $[\omega_j^i]$ relative to an orthonormal frame.

<MathBox title='' boxType='proposition'>
Let $E\to M$ be a Riemannian bundle and $\nabla$ a connection on $E$.
1. If the connection $\nabla$ is compatible with the metric, then its connection matrix $[\omega_j^i]$ relative to any orthonormal frame $\Set{\mathbf{e}_i}_{i=1}^r$ for $E$ over a trivializing open set $U\subset M$ is skew-symmetric.
2. If every point $\mathbf{p}\in M$ has a trivializing neighbourhood $U$ for $E$ such that the connection matrix $[\omega_j^i]$ relative to an orthonormal frame $\Set{\mathbf{e}_i}_{i=1}^r$ for $E$ over $U$ is skew-symmetric, then the connection $\nabla$ is compatible with the metric.

<details>
<summary>Proof</summary>

**(1):** Suppose $\nabla$ is compatible with the metric. For all $X\in\mathfrak{X}(U)$ and $i,j=1,\dots,r$

$$
\begin{align*}
  0 =& X\langle\mathbf{e}_i,\mathbf{e}_j\rangle \\
  =& \langle\nabla_X \mathbf{e}_i, \mathbf{e}_j \rangle + \langle\mathbf{e}_i, \nabla_X\mathbf{e}_j \rangle \\
  =& \left\langle \sum_{k=1}^r \omega_i^k (X)\mathbf{e}_k, \mathbf{e}_j \right\rangle + \left\langle \mathbf{e}_i, \sum_{k=1}^r \omega_j^k (X)\mathbf{e}_k \right\rangle \\
  =& \sum_{k=1}^r \omega_i^k (X)\delta_{kj} + \sum_{k=1}^r \omega_j^k (X)\delta_{ik} \\
  =& \omega_i^j (X) + \omega_j^i (X)
\end{align*}
$$

where $\delta_{ik}$ is the Kronecker delta. Hence

$$
  \omega_i^j = -\omega_j^i
$$

**(2):** Note that compatibility with the metric is a local condition, so $\nabla$ is compatible with the metric if and only if its restriction $\nabla^U$ to any open set $U$ is compatible with the metric. Suppose $\omega_i^j = -\omega_j^i$, and let $\mathbf{s} = \sum_{i=1}^r a^i \mathbf{e}_i$ and $\mathbf{t} = \sum_{j=1}^r b^j \mathbf{e}_j$ with $a^i, b^j \in C^\infty (U)$. Then

$$
\begin{align*}
  X\langle\mathbf{s},\mathbf{t}\rangle =& X\left(\sum_{i=1}^r a^i b^i \right) = \sum_{i=1}^r (Xa^i)b^i + \sum_{i=1}^r a^i X b^i \\
  =& \nabla_X \mathbf{s} =& \nabla_X \left(\sum_{i=1}^r a^i \mathbf{e}_i\right) = \sum_{i=1}^r (Xa^i)\mathbf{e}_i + \sum_{i=1}^r a^i \nabla_X \mathbf{e}_i \\
  =& \sum_{i=1}^r (Xa^i)\mathbf{e}_i + \sim_{i,k=1}^r a^i \omega_i^k (X)\mathbf{e}_k \\
  \langle\nabla_X \mathbf{s}, \mathbf{t}\rangle =& \sum_{i=1}^r (Xa^i)b^i + \sum_{i,j=1}^r a^i \omega_i^j (X) b_j \\
  \langle\mathbf{s},\nabla_X \mathbf{t}\rangle =& \sum_{i=1}^r (Xb^i)a^i + \sum_{i,j=1}^r b^i \omega_i^j (X) a^j \\
  =& \sum_{i=1}^r (Xb^i)a^i + \sum_{i,j=1}^r a^i b^j \omega_j^i (X)
\end{align*}
$$

The skew-symmetry of $\omega$ yields

$$
  \sum_{i,j=1}^r a^i b^j \omega_i^j (X) + \sum_{i,j=1}^r a^i b^j \omega_j^i (X) = 0
$$

Adding $\langle\nabla_X \mathbf{s},\mathbf{t}\rangle$ and $\langle\mathbf{s},\nabla_X \mathbf{t}\rangle$ gives

$$
\begin{align*}
  \langle\nabla_X \mathbf{s},\mathbf{t}\rangle + \langle\mathbf{s},\nabla_X \mathbf{t}\rangle =& \sum_{i=1}^r (Xa^i)b^i + \sum_{i=1}^r (Xb^i)a^i \\
  =& X\langle\mathbf{s},\mathbf{t}\rangle
\end{align*}
$$
</details>
</MathBox>

<MathBox title='' boxType='proposition'>
If the connection matrix $[\omega_j^i]$ relative to a frame $\Set{\mathbf{e}_i}_{i=1}^n$ of an affine connecion on a smooth manifold is skew-symmetric, then so is the curvature matrix $[\Omega_j^i]$.

<details>
<summary>Proof</summary>

By the structural equation

$$
\begin{align*}
  \Omega_i^j =& \mathrm{d}\omega_i^j + \sum_{k=1}^n \omega_k^j \wedge \omega_i^k \\
  =& -\mathrm{d}\omega_j^i + \sum_{k=1}^n (-\omega_j^k)\wedge(-\omega_k^i) \\
  =& -\mathrm{d}\omega_j^i - \sum_{k=1}^n \omega_k^i \wedge \omega_j^k \\
  =& -\Omega_j^i
\end{align*}
$$
</details>
</MathBox>

### Connections on the tangent bundle

A connection on the tangent bundle $TM$ of a smooth manifold $M$ is simply an affine connection on $M$. In addition to the curvature tensor $R(X,Y)Z$, an affine connection has a torsion tensor $T(X,Y)$.

Let $U$ be an open set in $M$ on which the tangent bundle $TM$ has a smooth frame $\Set{\mathbf{e}_i}_{i=1}^n$. If $U$ is a coordinate open set with coordinates $(x^i)_{i=1}^n$, then $\Set{\frac{\partial}{\partial x^i}}_{i=1}^n$ is such a frame, but we will consider the more general setting where $U$ need not be a coordinate open set. Let $\Set{\theta^i}_{i=1}^n$ be the dual frame of $1$-forms on $U$. This means

$$
  \theta^i (\mathbf{e}_j) = \delta_j^i
$$

<MathBox title='' boxType='proposition'>
If $X$ is a smooth vector field on the open set $U$ in a smooth $n$-manifold $M$, then $X = \sum_{i=1}^n \theta^i (X)\mathbf{e_i}$.

<details>
<summary>Proof</summary>

Since $\Set{\mathbf{e}_i}_{i=1}^n$ is a frame for the tangent bundle $TM$ over $U$

$$
  X = \sum_{i=1}^n a^i \mathbf{e}_i
$$

for some smooth functions $a^j \in C^\infty (U)$. Applying $\theta^i$ to both sides gives

$$
  \theta^i (X) =& \sum_{j=1}^n \theta^i (a^j \mathbf{e}_j) = \sum_{j=1}^n a^j \delta_j^i = a^i
$$

Thus,

$$
  X = \sum_{i=1}^n \theta^i (X)\mathbf{e}_i
$$
</details>
</MathBox>

For $X,Y\in\mathfrak{X}(U)$, the torsion $T(X,Y)$ is a linear combination of the frame $\Set{\mathbf{e}_i}_{i=1}^n$ on $U$ allowing us to write

$$
  T(X,Y) = \sum_{i=1}^n \tau^i (X,Y)\mathbf{e}_i
$$

Since $T(X,Y)$ is alternating and $\mathcal{F}$-bilinear, so are the coefficients $\tau^i$. Thus, the $\tau^i$ are $2$-forms on $U$, called the *torsion forms* of the affine connection $\nabla$ relative to the frame $\Set{\mathbf{e}_i}_{i=1}^n$ on $U$.

<MathBox title='' boxType='theorem'>
Relative to a frame $\Set{\mathbf{e}_i}_{i=1}^n$ for the tangent bundle over an open set $U$ of a smooth $n$-manifold $M$, the torsion and curvature forms of an affine connection on $M$ can be given in terms of the dual $1$-forms and the connection forms
1. **First structural equation:** $\tau^i = \mathrm{d}\theta^i + \sum_{j=1}^n \omega_j^i \wedge\theta^j$
2. **Second structural equation:** $\Omega_j^i = \mathrm{d}\omega_j^i + \sum_{k=1}^n \omega_k^i \wedge \omega_j^k$

<details>
<summary>Proof</summary>

**(1):** Let $X, Y\in\mathfrak{X}(U)$ be smooth vector fields on $U$. By the previous proposition we can write $Y = \sum_{j=1}^n \theta^j (Y) \mathbf{e}_j$. Then

$$
\begin{align*}
  \nabla_X Y =& \nabla_X \left(\sum_{j=1}^n \theta^j (Y) \mathbf{e}_j \right) \\
  =& \sum_{j=1}^n (X\theta^j (Y))\mathbf{e}_j + \sum_{j=1}^n \theta^j (Y) \nabla_X \mathbf{e}_j \\
  =& \sum_{j=1}^n (X\theta^j (Y))\mathbf{e}_j + \sim_{j=1}^n \theta^j (Y) \omega_j^i (X)\mathbf{e}_i
\end{align*}
$$

By symmetry

$$
  \nabla_Y X = \sum_{j=1}^n (Y\theta^j (X))\mathbf{e}_j + \sum_{j=1}^n \theta^j (X)\omega_j^i (Y)\mathbf{e}_i
$$

By the previous proposition

$$
  [X,Y] = \sum_{i=1}^n \theta^i ([X,Y])\mathbf{e}_i
$$

Thus, using Einstein summation convention

$$
\begin{align*}
  T(X,Y) =& \nabla_X Y - \nabla_Y X - [X,Y] \\
  =& \left([X\theta^i(Y) - Y\theta^i (X) - \theta^i([X,Y])] + [\omega_j^i (X)\theta^j (Y) - \omega_j^i (Y)\theta^j (X)]\right)\mathbf{e}_i \\
  =& (\mathrm{d}\theta^i + \omega_j^i \wedge \theta^j)(X,Y)\mathbf{e}_i
\end{align*}
$$

Hence

$$
  \tau^i = \mathrm{d}\theta^i + \sum_{j=1}^n \omega_j^i \wedge \theta^j
$$
</details>
</MathBox>

<MathBox title='' boxType='proposition'>
Let $M$ be a Riemannian manifold and $U$ an open subset on which there is an orthonormal frame $\Set{\mathbf{e}_i}_{i=1}^n$. Let $\Set{\theta^i}_{i=1}^n$ be the dual frame of $1$-forms. Then there exists a unique skew-symmetric matrix $[\omega_j^i]$ of $1$-forms such that

$$
  \mathrm{d}\theta^i + \sum_{j=1}^n \omega_j^i \wedge \theta^j = 0,\; \forall i=1,\dots,n
$$

<details>
<summary>Proof</summary>

Let $[\omega_j^i]$ be the connection matrix of $\nabla$ relative to the orthonormal frame $\Set{\mathbf{e}_i}_{i=1}^n$ on $U$. Because $\nabla$ is compatible with the metric, the matrix $[\omega_j^i]$ is skew-symmetric. Because $\nabla$ is torsion-free, it satisfies

$$
  \mathrm{d}\theta^i + \sum_{j=1}^n \omega_j^i \wedge\theta^j = 0
$$

This proves the existence of the matrix $[\omega_j^i]$ with the two required properties.

To prove uniqueness, suppose $[\omega_j^i]$ is any skew-symmetric matrix of $1$-forms on $U$ satisfying the hypothesis. Taking the vector bundle $E$ to be the tangent bundle $TM$, then $[\omega_j^i]$ defines an affine connection $\nabla$ on $U$ which is the connection matrix relative to the frame $\Set{\mathbf{e}_i}_{i=1}^n$ on $U$. Because $[\omega_j^i]$ is skew-symmetric, $\nabla$ is compatible with the metric, and because $[\omega_j^i]$ satisfies the hypothesis, $\nabla$ is torsion-free. Thus, $\nabla$ is the unique Levi-Civita connection on $U$.
</details>
</MathBox>

If $\mathbf{A} = [\alpha_j^i]$ and $\mathbf{B} = [\beta_j^i]$ are matrices of differential forms on $M$ with the number of columns of $\mathbf{A}$ equal to the number of rows of $\mathbf{B}$, then their wedge product $\mathbf{A}\wedge\mathbf{B}$ is the matrix of differential form whose $(i,j)$-entry is

$$
  (\mathbf{A}\wedge\mathbf{B})_j^i = \sum_k \alpha_k^i \wedge \beta_j^k
$$

and $\mathrm{d}\mathbf{A}$ is defined to be $[\mathrm{d}\alpha_j^i]$. In matrix notation we write

$$
  \tau = \begin{bmatrix} \tau^1 \\ \vdots \\ \tau^n \end{bmatrix}, \quad \theta = \begin{bmatrix} \theta^1 \\ \vdots \\ \theta^n \end{bmatrix}, \quad \omega = [\omega_j^i], \quad \Omega = [\Omega_j^i]
$$

Then the first structural equation becomes

$$
  \tau = \mathrm{d}\theta + \omega + \omega\wedge\theta
$$

and the second structural equation becomes

$$
  \Omega = \mathrm{d}\omega + \omega\wedge\omega
$$

## Gauss's Theorema Egregium using forms

# Geodesics

# Partial derivative (basis vector)

Partial derivatives represent basis vectors

$$
  \mathbf{e}_i \equiv \frac{\partial}{\partial \mathbf{x}^i} \equiv \boldsymbol{\partial}_i
$$

A basis of partial derivatives can be transformed to a new basis $\tilde{\mathbf{e}}_i \equiv \frac{\partial}{\partial \tilde{\mathbf{x}}^i}$ by the chain rule

$$
  \frac{\partial}{\partial \tilde{\mathbf{x}}^i} = \frac{\partial x^j}{\partial \tilde{x}^i} \frac{\partial}{\partial \mathbf{x}^j} = J_i^j \frac{\partial}{\partial \mathbf{x}^j}
$$

where $J$ is the Jacobian matrix of the coordinate transform.

Tangent vectors of a curve can be expressed as linear combination of partial derivatives

$$
  \frac{\mathrm{d}}{\mathrm{d} \lambda} = \frac{\mathrm{d}x^i}{\mathrm{d} \lambda} \frac{\partial }{\partial \mathbf{x}^i} 
$$

Tangent vectors can be transformed to a new basis. The tangent vector derivative components transform contravariantly

$$
\begin{align*}
  \frac{\mathrm{d}}{\mathrm{d} \lambda} = \frac{\mathrm{d}x^i}{\mathrm{d} \lambda} \frac{\partial }{\partial \mathbf{x}^i} &= \frac{\mathrm{d}x^i}{\mathrm{d} \lambda} \left( \frac{\partial \tilde{x}^j}{\partial x^i} \frac{\partial}{\partial \tilde{\mathbf{x}}^j} \right) \\
  &= \left( \frac{\mathrm{d}x^i}{\mathrm{d} \lambda} \frac{\partial \tilde{x}^j}{\partial x^i} \right) \frac{\partial}{\partial \tilde{\mathbf{x}}^j} \\
  &= \frac{\mathrm{d} \tilde{x}^i}{\mathrm{d} \lambda} \frac{\partial}{\partial \tilde{\mathbf{x}}^i}
\end{align*}
$$

# Gradient

The gradient (del) operator maps a scalar field to a vector field. 

$$
  \operatorname{grad}(f) = \left( \operatorname{grad}(f) \right)^i \frac{\partial}{\partial x^i}
$$

The gradient operator and differential form are a dual pair

$$
\begin{align*}
  \mathrm{d}f = \operatorname{grad}(f) \cdot \_ &= g\left( \operatorname{grad}(f), \_ \right) \\ 
  &= \left[ g_{ij} \left( \mathrm{d}x^i \otimes \mathrm{d}x^j \right) \right] \left[ \left( \operatorname{grad}(f) \right)^k \frac{\partial}{\partial x^k} \right] \\
  &= g_{ij} \left( \operatorname{grad}(f) \right)^k \mathrm{d}x^i \left( \frac{\partial}{\partial x^k} \right) \mathrm{d}x^j \\
  &= g_{ij} \left( \operatorname{grad}(f) \right)^k \delta_k^i \mathrm{d}x^j \\
  &= g_{ij} \left( \operatorname{grad}(f) \right)^i  \mathrm{d}x^j
\end{align*}
$$

The covector components are given by

$$
  \frac{\partial f}{\partial x^j} = \left( \operatorname{grad}(f) \right)^i g_{ij}
$$

The gradient components are retrieved by applying the inverse metric tensor

$$
\begin{align*}
  \frac{\partial f}{\partial x^j} \mathfrak{g}^{jk} &= \left( \operatorname{grad}(f) \right)^i g_{ij} \mathfrak{g}^{jk} \\
  &= \left( \operatorname{grad}(f) \right)^i \delta_i^k \\
  &= \left( \operatorname{grad}(f) \right)^k &= \frac{\partial f}{\partial x^j} \mathfrak{g}^{jk}
\end{align*}    
$$

The gradient can thus be expressed as

$$
  \operatorname{grad}(f) = \left( \operatorname{grad}(f) \right)^i \frac{\partial}{\partial x^k} = \mathfrak{g}^{jk} \frac{\partial f}{\partial x^j} \frac{\partial}{\partial x^k} 
$$

For a Cartesian basis $g_{ij} = \mathfrak{g}_{ij} = \delta_{ij}$ and the gradient simplifies to

$$
  \operatorname{grad}(f) = \frac{\partial f}{\partial x^i} \frac{\partial}{\partial x^i}
$$

# Directional derivative

The directional derivative is defined as

$$
  \mathrm{d}f (\mathbf{v}) \equiv \operatorname{grad}(\)mathbf{v} f = \lim_{h \to 0} \frac{f(\mathbf{x} + \mathbf{h} \cdot \mathbf{v}) - f(\mathbf{x})}{\mathbf{h}} = \mathbf{v} \cdot \operatorname{grad}(f)
$$

This implies that the gradient (vector) $\operatorname{grad}(f)$ and the differential form (covector) $\mathrm{d}f$ are dual pairs

$$
\begin{align*}
  \mathrm{d}f(\mathbf{v}) = \operatorname{grad}(f) \cdot \mathbf{v} &= \left[ \left( \operatorname{grad}(f)\right)^i \frac{\partial}{\partial x^i} \right] \cdot \left(v^j \frac{\partial}{\partial x^j} \right) \\
  &= \left( \operatorname{grad}(f) \right)^i v^j \left( \frac{\partial}{\partial x^i} \cdot \frac{\partial}{\partial x^j} \right) \\
  &= \left( \operatorname{grad}(f) \right)^i v^j g_{ij}
\end{align*}
$$

Alternatively

$$
\begin{align*}
  \operatorname{grad}(f) \cdot \mathbf{v} &= g\left(\operatorname{grad}(f), \mathbf{v} \right) \\
  &= \left[ g_{ij} \left( \mathrm{d}x^i \otimes \mathrm{d}x^j \right) \right] \left[ \left( \operatorname{grad}(f) \right)^k \frac{\partial}{\partial x^k} , v^l \frac{\partial}{\partial x^l} \right] \\
  &= g_{ij} \mathrm{d}x^i \left[ \left( \operatorname{grad}(f) \right)^k \frac{\partial}{\partial x^k} \right] \mathrm{d}x^j \left( v^l \frac{\partial}{\partial x^l} \right) \\
  &= g_{ij} \left( \operatorname{grad}(f) \right)^k v^l \mathrm{d}x^i \left( \frac{\partial}{\partial x^k} \right) \mathrm{d}x^j \left( \frac{\partial}{\partial x^l} \right) \\
  &= g_{ij} \left( \operatorname{grad}(f) \right)^k v^l \delta_k^i \delta_l^j \\
  &= g_{ij} \left( \operatorname{grad}(f) \right)^i v^j
\end{align*}
$$